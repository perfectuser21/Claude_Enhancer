# Perfect21 性能基准测试配置

# 基准阈值
performance_thresholds:
  # 工作流生成速度
  workflow_generation_ms: 500
  max_workflow_generation_ms: 1000

  # 并行执行性能
  min_parallel_agents: 3
  parallel_efficiency_threshold: 0.8
  max_parallel_overhead_factor: 1.5

  # 任务执行吞吐量
  min_throughput_tasks_per_second: 10

  # 资源使用限制
  max_memory_usage_mb: 100
  max_cpu_usage_percent: 80
  max_thread_increase: 20
  max_memory_leak_mb: 20

# 测试场景配置
test_scenarios:
  # 小规模并行测试
  small_parallel:
    agents: 3
    execution_time_seconds: 1
    expected_completion_time_seconds: 1.5

  # 中规模并行测试
  medium_parallel:
    agents: 6
    execution_time_seconds: 2
    expected_completion_time_seconds: 3

  # 大规模并行测试
  large_parallel:
    agents: 10
    execution_time_seconds: 3
    expected_completion_time_seconds: 4

  # 超大规模测试
  xlarge_parallel:
    agents: 20
    execution_time_seconds: 5
    expected_completion_time_seconds: 7

# Agent选择准确性测试
agent_selection_tests:
  api_development:
    keywords: ["API", "REST", "endpoint", "backend"]
    expected_agents: ["api-designer", "backend-architect"]
    avoid_agents: ["frontend-specialist", "mobile-developer"]

  frontend_development:
    keywords: ["React", "Vue", "frontend", "UI", "interface"]
    expected_agents: ["frontend-specialist", "ui-designer"]
    avoid_agents: ["database-specialist", "devops-engineer"]

  database_design:
    keywords: ["database", "SQL", "schema", "data model"]
    expected_agents: ["database-specialist", "backend-architect"]
    avoid_agents: ["frontend-specialist", "content-writer"]

  testing_strategy:
    keywords: ["test", "QA", "quality", "validation"]
    expected_agents: ["test-engineer", "qa-specialist"]
    avoid_agents: ["ui-designer", "content-writer"]

  security_implementation:
    keywords: ["security", "auth", "encryption", "vulnerability"]
    expected_agents: ["security-auditor", "backend-architect"]
    avoid_agents: ["ui-designer", "content-writer"]

# 复杂度分析基准
complexity_analysis:
  low_complexity:
    indicators: ["simple", "basic", "minor", "quick"]
    expected_agents: 1
    expected_time_minutes: 5

  medium_complexity:
    indicators: ["implement", "develop", "create", "design"]
    expected_agents: 3
    expected_time_minutes: 30

  high_complexity:
    indicators: ["architecture", "system", "microservice", "platform"]
    expected_agents: 5
    expected_time_minutes: 120

# 资源监控配置
resource_monitoring:
  sampling_interval_seconds: 0.1
  monitoring_duration_seconds: 30
  memory_alert_threshold_mb: 80
  cpu_alert_threshold_percent: 70
  thread_alert_threshold: 50

# 工作流模板测试
workflow_templates:
  simple_workflow:
    stages: 2
    tasks_per_stage: 2
    execution_mode: "parallel"

  medium_workflow:
    stages: 4
    tasks_per_stage: 3
    execution_mode: "mixed"

  complex_workflow:
    stages: 6
    tasks_per_stage: 5
    execution_mode: "layered"

# 错误恢复测试配置
error_recovery:
  failure_rates:
    low: 0.1
    medium: 0.3
    high: 0.5

  recovery_strategies:
    retry: ["timeout", "network_error"]
    skip: ["validation_error"]
    fail: ["critical_error"]

  max_retry_attempts: 3
  retry_delay_seconds: 1

# 质量门测试
quality_gates:
  code_coverage:
    threshold: 90
    critical: true

  test_pass_rate:
    threshold: 95
    critical: true

  performance_score:
    threshold: 80
    critical: false

  security_score:
    threshold: 85
    critical: true

# 报告配置
reporting:
  output_format: ["json", "html", "markdown"]
  include_charts: true
  detailed_metrics: true
  benchmark_comparison: true

  metrics_to_track:
    - execution_time
    - memory_usage
    - cpu_usage
    - parallel_efficiency
    - agent_selection_accuracy
    - error_recovery_rate
    - throughput
    - resource_utilization