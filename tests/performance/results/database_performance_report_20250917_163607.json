{
  "test_summary": {
    "test_date": "2025-09-17T16:36:07.611393",
    "database_path": ".perfect21/test_performance.db",
    "database_size_mb": 19.29296875,
    "total_records": 88600
  },
  "performance_metrics": {
    "insert_performance": "DatabaseMetrics(operation_type='INSERT', total_operations=1000, successful_operations=1000, failed_operations=0, avg_response_time=0.004045945882797241, max_response_time=0.022347211837768555, min_response_time=0.002389669418334961, operations_per_second=246.60395870029967, concurrent_connections=1, test_duration=4.055084943771362)",
    "query_performance": "DatabaseMetrics(operation_type='SELECT', total_operations=1000, successful_operations=1000, failed_operations=0, avg_response_time=0.0028528716564178466, max_response_time=0.007779359817504883, min_response_time=0.0002543926239013672, operations_per_second=349.506197869, concurrent_connections=1, test_duration=2.8611795902252197)",
    "update_performance": "DatabaseMetrics(operation_type='UPDATE', total_operations=500, successful_operations=500, failed_operations=0, avg_response_time=0.0025862059593200685, max_response_time=0.010470867156982422, min_response_time=0.0016453266143798828, operations_per_second=384.8912591235283, concurrent_connections=1, test_duration=1.2990682125091553)",
    "concurrent_access": "DatabaseMetrics(operation_type='CONCURRENT_MIXED', total_operations=500, successful_operations=500, failed_operations=0, avg_response_time=0.010193268775939941, max_response_time=0.7321231365203857, min_response_time=0.00022339820861816406, operations_per_second=564.6296599436542, concurrent_connections=10, test_duration=0.8855361938476562)",
    "large_dataset_performance": "DatabaseMetrics(operation_type='LARGE_DATASET_QUERY', total_operations=30, successful_operations=30, failed_operations=0, avg_response_time=0.06635366280873617, max_response_time=0.15041041374206543, min_response_time=0.0053632259368896484, operations_per_second=15.062518928534233, concurrent_connections=1, test_duration=1.9916987419128418)",
    "transaction_performance": "DatabaseMetrics(operation_type='TRANSACTION', total_operations=200, successful_operations=200, failed_operations=0, avg_response_time=0.004249005317687988, max_response_time=0.009952545166015625, min_response_time=0.002353191375732422, operations_per_second=234.91658097369617, concurrent_connections=1, test_duration=0.8513660430908203)",
    "index_efficiency": {
      "workflow_id索引": {
        "avg_execution_time": 0.00022509098052978516,
        "max_execution_time": 0.0004134178161621094,
        "min_execution_time": 0.0001838207244873047,
        "result_count": 0,
        "query": "SELECT * FROM workflows WHERE workflow_id = 'test_workflow_500'"
      },
      "state索引": {
        "avg_execution_time": 0.0004371285438537598,
        "max_execution_time": 0.0006465911865234375,
        "min_execution_time": 0.00035381317138671875,
        "result_count": 70,
        "query": "SELECT * FROM workflows WHERE state = 'running'"
      },
      "无索引查询": {
        "avg_execution_time": 0.01488950252532959,
        "max_execution_time": 0.022935152053833008,
        "min_execution_time": 0.012399911880493164,
        "result_count": 5200,
        "query": "SELECT * FROM workflows WHERE name LIKE '%test%'"
      },
      "JOIN查询": {
        "avg_execution_time": 0.0338081955909729,
        "max_execution_time": 0.051428794860839844,
        "min_execution_time": 0.029026269912719727,
        "result_count": 5200,
        "query": "\n                SELECT w.*, COUNT(t.id) as task_count\n                FROM workflows w\n                LEFT JOIN tasks t ON w.workflow_id = t.workflow_id\n                GROUP BY w.id\n            "
      },
      "复合条件": {
        "avg_execution_time": 0.06272675991058349,
        "max_execution_time": 0.06853246688842773,
        "min_execution_time": 0.059313297271728516,
        "result_count": 15528,
        "query": "SELECT * FROM tasks WHERE workflow_id LIKE 'test_%' AND status = 'completed'"
      }
    }
  },
  "database_statistics": {
    "workflows_count": 5200,
    "stages_count": 20800,
    "tasks_count": 62400,
    "execution_logs_count": 200,
    "performance_metrics_count": 0,
    "total_records": 88600,
    "database_size_bytes": 20230144,
    "database_size_mb": 19.29296875
  },
  "performance_summary": {
    "insert_performance": {
      "operations_per_second": 246.60395870029967,
      "avg_response_time": 0.004045945882797241,
      "success_rate": 1.0
    },
    "query_performance": {
      "operations_per_second": 349.506197869,
      "avg_response_time": 0.0028528716564178466,
      "success_rate": 1.0
    },
    "update_performance": {
      "operations_per_second": 384.8912591235283,
      "avg_response_time": 0.0025862059593200685,
      "success_rate": 1.0
    },
    "concurrent_access": {
      "operations_per_second": 564.6296599436542,
      "avg_response_time": 0.010193268775939941,
      "success_rate": 1.0
    },
    "large_dataset_performance": {
      "operations_per_second": 15.062518928534233,
      "avg_response_time": 0.06635366280873617,
      "success_rate": 1.0
    },
    "transaction_performance": {
      "operations_per_second": 234.91658097369617,
      "avg_response_time": 0.004249005317687988,
      "success_rate": 1.0
    },
    "overall": {
      "avg_operations_per_second": 299.26836258978545,
      "avg_response_time": 0.01504682673348321,
      "avg_success_rate": 1.0,
      "performance_score": 100
    }
  },
  "recommendations": [
    "large_dataset_performance: 吞吐量较低，检查数据库配置和硬件性能",
    "定期执行VACUUM操作以优化数据库文件",
    "考虑实现连接池以提高并发性能",
    "监控数据库大小和查询性能趋势",
    "实现数据归档策略以控制数据库增长"
  ]
}