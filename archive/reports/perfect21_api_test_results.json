{
  "test_session": {
    "timestamp": "2025-09-16T15:51:51.514576",
    "test_type": "API_Complete_Test",
    "environment": {
      "python_version": "3.10.12 (main, Aug 15 2025, 14:32:43) [GCC 11.4.0]",
      "project_path": "/home/xx/dev/Perfect21"
    },
    "summary": {
      "total_tests": 7,
      "passed_tests": 7,
      "failed_tests": 0,
      "success_rate": 100.0,
      "overall_status": "PRODUCTION_READY",
      "test_completion_time": "2025-09-16T15:51:52.800286"
    }
  },
  "api_tests": {
    "cli_status": {
      "command": "main/cli.py status",
      "return_code": 0,
      "execution_time": 0.25186848640441895,
      "stdout_length": 946,
      "stderr_length": 111,
      "success": true,
      "output_contains_perfect21": true,
      "output_preview": "2025-09-16 15:51:51,642 - GitHooks - INFO - Git Hooks初始化完成 - 基于claude-code-unified-agents\n2025-09-16 15:51:51,643 - GitHooks - INFO - Git Hooks初始化完成 - 基于claude-code-unified-agents\n2025-09-16 15:51:51,643 - WorkflowManager - INFO - Git工作流管理器初始化完成\n2025-09-16 15:51:51,643 - GitHooks - INFO - Git Hooks初...",
      "error_preview": "2025-09-16 15:51:51 - Perfect21 - INFO - Perfect21初始化完成\n2025-09-16 15:51:51 - Perfect21 - INFO - Perfect21清理完成\n"
    },
    "orchestrator_gateway": {
      "init_time": 0.0005855560302734375,
      "call_time": 0.05189156532287598,
      "orchestrator_call_generated": true,
      "call_content_length": 2917,
      "contains_perfect21_context": true,
      "contains_capability_info": false,
      "gateway_stats": {
        "conversations": 1,
        "capabilities_available": {
          "templates": 10,
          "agents": 56,
          "commands": 46,
          "execution_modes": 3
        }
      },
      "success": true,
      "content_quality": {
        "has_user_request": true,
        "has_instructions": true,
        "has_capabilities": true,
        "length_sufficient": true
      }
    },
    "capability_injection": {
      "injector_init_time": 7.152557373046875e-07,
      "injection_time": 0.018173694610595703,
      "direct_call_time": 0.017035722732543945,
      "injection_success": true,
      "injection_stats": {
        "capabilities_count": 10,
        "agents_available": 56,
        "hooks_active": 13,
        "context_size": 2911
      },
      "direct_call_length": 2938,
      "capability_stats": {
        "total_injections": 3,
        "capabilities_available": {
          "templates": 10,
          "agents": 56,
          "commands": 46,
          "execution_modes": 3
        },
        "templates_count": 10,
        "agents_count": 56
      },
      "success": true,
      "context_quality": {
        "has_user_request": true,
        "has_capabilities_briefing": true,
        "has_agent_info": true,
        "has_execution_plan": true
      }
    },
    "git_hooks": {
      "manager_init_time": 0.034931182861328125,
      "p21_init_time": 0.0007240772247314453,
      "total_hooks_available": 13,
      "hook_groups": [
        "advanced",
        "complete",
        "essential",
        "standard"
      ],
      "hook_execution_tests": {
        "pre-commit": {
          "execution_time": 0.021694660186767578,
          "success": true,
          "agent_called": true,
          "agent_name": "@orchestrator",
          "task_ready": true
        },
        "pre-push": {
          "execution_time": 0.02516341209411621,
          "success": false,
          "agent_called": false,
          "agent_name": "",
          "task_ready": false
        },
        "post-checkout": {
          "execution_time": 0.01968097686767578,
          "success": true,
          "agent_called": true,
          "agent_name": "@devops-engineer",
          "task_ready": true
        }
      },
      "average_hook_time": 0.022179683049519856,
      "success": true,
      "subagent_mappings": {
        "applypatch-msg": "@business-analyst",
        "commit-msg": "@business-analyst",
        "post-applypatch": "@test-engineer",
        "post-checkout": "@devops-engineer",
        "post-commit": "@devops-engineer",
        "post-merge": "@test-engineer",
        "post-rewrite": "@devops-engineer",
        "pre-applypatch": "@code-reviewer",
        "pre-auto-gc": "@devops-engineer",
        "pre-commit": "auto",
        "pre-push": "auto",
        "pre-rebase": "@code-reviewer",
        "prepare-commit-msg": "@business-analyst"
      },
      "subagent_coverage": 13
    }
  },
  "integration_tests": {
    "system_integration": {
      "workflow_steps": {
        "step1_cli_available": true,
        "step2_gateway_functional": true,
        "step3_injection_working": true,
        "step4_hooks_responsive": true,
        "step5_agents_accessible": true,
        "agents_found": 53
      },
      "successful_steps": 5,
      "total_steps": 5,
      "integration_score": 100.0,
      "system_ready": true,
      "success": true
    }
  },
  "performance_metrics": {
    "metrics": {
      "startup_times": {
        "perfect21": 0.0014677047729492188,
        "orchestrator_gateway": 1.5974044799804688e-05,
        "capability_injector": 3.337860107421875e-06
      },
      "api_response_times": {
        "git_hook_pre_commit": 0.019221067428588867,
        "gateway_talk": 0.019113540649414062,
        "injector_call": 0.02724456787109375
      },
      "concurrent_performance": {
        "total_time": 0.2844822406768799,
        "operations_count": 5,
        "success_count": 5,
        "average_time_per_operation": 0.05689644813537598,
        "success_rate": 100.0
      },
      "memory_usage": {
        "rss_mb": 28.84375,
        "vms_mb": 1540.25,
        "memory_available": true
      }
    },
    "evaluation": {
      "startup_performance": "good",
      "api_performance": "good",
      "concurrent_performance": "good",
      "overall_performance": "production_ready"
    },
    "performance_summary": {
      "fastest_startup": "capability_injector",
      "fastest_api": "gateway_talk",
      "concurrent_success_rate": 100.0
    },
    "success": true
  },
  "agent_coordination": {
    "multi_agent_scenarios": {
      "scenarios_tested": 4,
      "scenarios_results": {
        "web_development": {
          "description": "开发完整的Web应用",
          "expected_agents": [
            "@backend-architect",
            "@frontend-developer",
            "@database-designer"
          ],
          "coordination_type": "parallel",
          "context_generation_time": 0.02609872817993164,
          "context_length": 2897,
          "context_contains_agents": true,
          "context_contains_perfect21": true,
          "success": true
        },
        "security_audit": {
          "description": "执行安全审计和漏洞修复",
          "expected_agents": [
            "@security-auditor",
            "@code-reviewer"
          ],
          "coordination_type": "sequential",
          "context_generation_time": 0.03541088104248047,
          "context_length": 2898,
          "context_contains_agents": true,
          "context_contains_perfect21": true,
          "success": true
        },
        "performance_optimization": {
          "description": "性能分析和系统优化",
          "expected_agents": [
            "@performance-engineer",
            "@devops-engineer"
          ],
          "coordination_type": "coordinated",
          "context_generation_time": 0.02853989601135254,
          "context_length": 2896,
          "context_contains_agents": true,
          "context_contains_perfect21": true,
          "success": true
        },
        "code_review_workflow": {
          "description": "代码审查和质量保证",
          "expected_agents": [
            "@orchestrator",
            "@code-reviewer",
            "@test-engineer"
          ],
          "coordination_type": "orchestrated",
          "context_generation_time": 0.028024673461914062,
          "context_length": 2896,
          "context_contains_agents": true,
          "context_contains_perfect21": true,
          "success": true
        }
      },
      "total_expected_agents": 10,
      "average_context_generation_time": 0.029518544673919678,
      "all_scenarios_success": true,
      "success": true
    }
  }
}