# Perfect21 强制并行执行配置
# 确保每次都触发多Agent并行工作流

# 全局执行设置
execution_settings:
  default_mode: mandatory_parallel  # 强制并行模式
  minimum_agents: 3                 # 最少同时调用的Agent数量
  parallel_enforcement: true        # 启用并行强制执行
  serial_execution_blocked: true    # 阻止串行执行

# Agent组合策略
agent_combinations:
  orchestrator_led:
    primary: "@orchestrator"
    required_parallel: ["@code-reviewer", "@security-auditor", "@test-engineer", "@devops-engineer"]
    min_agents: 4
    description: "orchestrator主导的全面质量检查"

  code_review_focused:
    primary: "@code-reviewer"
    required_parallel: ["@security-auditor", "@test-engineer"]
    min_agents: 3
    description: "代码审查为主的质量检查"

  security_focused:
    primary: "@security-auditor"
    required_parallel: ["@test-engineer", "@devops-engineer"]
    min_agents: 3
    description: "安全为主的综合检查"

  testing_focused:
    primary: "@test-engineer"
    required_parallel: ["@code-reviewer", "@devops-engineer"]
    min_agents: 3
    description: "测试为主的质量验证"

  deployment_focused:
    primary: "@devops-engineer"
    required_parallel: ["@security-auditor", "@test-engineer"]
    min_agents: 3
    description: "部署为主的基础设施检查"

# 分支策略配置
branch_strategies:
  main:
    agents: ["@orchestrator", "@code-reviewer", "@security-auditor", "@test-engineer", "@devops-engineer"]
    mode: "strict_parallel"
    min_agents: 5
    description: "主分支最严格检查"

  feature:
    agents: ["@code-reviewer", "@test-engineer", "@security-auditor"]
    mode: "standard_parallel"
    min_agents: 3
    description: "功能分支标准检查"

  hotfix:
    agents: ["@test-engineer", "@code-reviewer", "@devops-engineer"]
    mode: "fast_parallel"
    min_agents: 3
    description: "热修复分支快速检查"

  release:
    agents: ["@deployment-manager", "@test-engineer", "@security-auditor", "@devops-engineer"]
    mode: "release_parallel"
    min_agents: 4
    description: "发布分支部署就绪检查"

# 强制并行关键词
parallel_keywords:
  enforce:
    - "MANDATORY_PARALLEL"
    - "强制并行"
    - "必须同时调用"
    - "禁止串行"
    - "MUST execute in parallel"
    - "同时调用所有Agent"

  block_serial:
    - "NO_SERIAL_EXECUTION"
    - "禁止逐个调用"
    - "不允许串行"
    - "BLOCK_SEQUENTIAL"

# 执行验证规则
validation_rules:
  parallel_enforcement:
    enabled: true
    min_concurrent_agents: 3
    block_single_agent_calls: true
    require_parallel_keywords: true

  execution_monitoring:
    track_parallel_calls: true
    log_serial_attempts: true
    alert_on_violation: true

# 提示词模板
prompt_templates:
  mandatory_parallel: |
    🚀 PERFECT21 强制并行执行模式

    ⚠️ 重要指令:
    1. 你必须在单个消息中同时调用所有指定的Agent
    2. 绝对禁止串行执行，必须使用并行Task调用
    3. 每个Agent都有不同的专业职责，需要协作完成任务
    4. 这是Perfect21的核心能力，必须严格遵守

    必须并行调用的Agent: {agents}

    💡 执行格式:
    <function_calls>
    {agent_calls}
