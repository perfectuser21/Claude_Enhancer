# Perfect21 å®Œæ•´å·¥ä½œæµé›†æˆ

## ğŸ¯ ç³»ç»Ÿæ¶æ„ - å®Œå…¨é›†æˆ

ç°åœ¨Perfect21å®ç°äº†Claude hookså’ŒGit hooksçš„**å®Œå…¨é›†æˆ**ï¼Œå½¢æˆäº†ä¸€ä¸ªç«¯åˆ°ç«¯çš„å·¥ä½œæµï¼š

```mermaid
graph TD
    A[ç”¨æˆ·è¯·æ±‚] --> B[Claude Codeæ¥æ”¶]
    B --> C{Perfect21 Workflow}

    C --> D[1. ä»»åŠ¡è§„åˆ’]
    D --> E[Task Analyzer<br/>ä»»åŠ¡ç±»å‹è¯†åˆ«]

    C --> F[2. Agenté€‰æ‹©]
    F --> G[Agent Validator<br/>æ•°é‡éªŒè¯]
    F --> H[Parallel Checker<br/>å¹¶è¡Œæ£€æŸ¥]

    C --> I[3. ä»£ç æ‰§è¡Œ]
    I --> J[Quality Gates<br/>è´¨é‡æ£€æŸ¥]

    C --> K[4. Gitæ“ä½œ]
    K --> L[Git Bridge<br/>Gité›†æˆ]
    K --> M[Git Hooks<br/>pre-commit/push]

    M --> N[5. éƒ¨ç½²]
    N --> O[å®Œæˆ]
```

## ğŸ“Š å®Œæ•´å·¥ä½œæµé˜¶æ®µ

### Stage 1: ä»»åŠ¡è§„åˆ’ (Planning)
```bash
è§¦å‘: ç”¨æˆ·æå‡ºéœ€æ±‚
Hooks: perfect21_task_analyzer.sh
è¾“å‡º: ä»»åŠ¡ç±»å‹è¯†åˆ«ï¼ŒAgentå»ºè®®
```

### Stage 2: Agenté€‰æ‹© (Agent Selection)
```bash
è§¦å‘: Taskå·¥å…·è°ƒç”¨
Hooks:
  - perfect21_agent_validator.sh (éªŒè¯æ•°é‡)
  - perfect21_parallel_checker.sh (æ£€æŸ¥å¹¶è¡Œ)
è¾“å‡º: éªŒè¯é€šè¿‡æˆ–é˜»æ­¢
```

### Stage 3: ä»£ç æ‰§è¡Œ (Execution)
```bash
è§¦å‘: Edit/Writeæ“ä½œ
Hooks: perfect21_quality_gates.sh
è¾“å‡º: è´¨é‡æé†’å’Œå»ºè®®
```

### Stage 4: è´¨é‡æ£€æŸ¥ (Quality Check)
```bash
è§¦å‘: æµ‹è¯•è¿è¡Œ
Hooks: perfect21_quality_gates.sh
è¾“å‡º: æµ‹è¯•ç»“æœåˆ†æ
```

### Stage 5: Gitæäº¤ (Git Commit)
```bash
è§¦å‘: git add/commit/push
Claude Hooks: perfect21_git_bridge.sh
Git Hooks: pre-commit, commit-msg, pre-push
è¾“å‡º: æäº¤éªŒè¯å’Œæ ¼å¼åŒ–
```

### Stage 6: éƒ¨ç½² (Deployment)
```bash
è§¦å‘: deployå‘½ä»¤
Hooks: perfect21_workflow.sh
è¾“å‡º: éƒ¨ç½²æ£€æŸ¥æ¸…å•
```

## ğŸ”„ Hooké›†æˆçŸ©é˜µ

| æ“ä½œç±»å‹ | Claude Hooks | Git Hooks | é›†æˆçŠ¶æ€ |
|---------|--------------|-----------|----------|
| Taskè°ƒç”¨ | âœ… agent_validator, parallel_checker | - | âœ… å®Œå…¨é›†æˆ |
| ä»£ç ç¼–è¾‘ | âœ… quality_gates | - | âœ… å®Œå…¨é›†æˆ |
| æµ‹è¯•è¿è¡Œ | âœ… quality_gates | - | âœ… å®Œå…¨é›†æˆ |
| Git commit | âœ… git_bridge | âœ… pre-commit | âœ… å®Œå…¨é›†æˆ |
| Git push | âœ… git_bridge | âœ… pre-push | âœ… å®Œå…¨é›†æˆ |
| éƒ¨ç½² | âœ… workflow | - | âœ… å®Œå…¨é›†æˆ |

## ğŸš€ ç»Ÿä¸€å·¥ä½œæµç‰¹æ€§

### 1. **è‡ªåŠ¨åŒ–æµç¨‹**
- Claudeæ“ä½œè‡ªåŠ¨è§¦å‘ç›¸åº”hooks
- Gitæ“ä½œæ— ç¼é›†æˆè´¨é‡æ£€æŸ¥
- å·¥ä½œæµçŠ¶æ€è‡ªåŠ¨è·Ÿè¸ª

### 2. **æ™ºèƒ½æé†’**
```bash
# ç¤ºä¾‹ï¼šæäº¤ä»£ç æ—¶çš„è‡ªåŠ¨æé†’
ğŸ”— Perfect21 Git Bridge: æ£€æµ‹åˆ°commitæ“ä½œ

âš ï¸ Gitæäº¤å‰æ£€æŸ¥æ¸…å•ï¼š
  â–¡ è¿è¡Œæµ‹è¯• (npm test / pytest)
  â–¡ ä»£ç æ ¼å¼åŒ– (prettier / black)
  â–¡ Lintæ£€æŸ¥ (eslint / flake8)
  â–¡ ç±»å‹æ£€æŸ¥ (tsc / mypy)
```

### 3. **è¿›åº¦è¿½è¸ª**
```bash
ğŸ“Š å·¥ä½œæµè¿›åº¦ï¼š
  [âœ“] ä»»åŠ¡è§„åˆ’
  [âœ“] Agenté€‰æ‹©
  [âœ“] ä»£ç æ‰§è¡Œ
  [ ] è´¨é‡æ£€æŸ¥
  [ ] ä»£ç æäº¤
  [ ] éƒ¨ç½²ä¸Šçº¿
```

### 4. **æ—¥å¿—ç»Ÿä¸€**
æ‰€æœ‰æ“ä½œè®°å½•åœ¨ç»Ÿä¸€çš„æ—¥å¿—ä¸­ï¼š
- `/tmp/perfect21_workflow.log` - ä¸»å·¥ä½œæµæ—¥å¿—
- `/tmp/perfect21_master.log` - Hookæ‰§è¡Œæ—¥å¿—
- å„ä¸“é¡¹æ—¥å¿—æ–‡ä»¶

## ğŸ”§ é…ç½®æ–‡ä»¶

### Claude Hooksé…ç½®
`.claude/hooks/perfect21_config.yaml`
- Hookè¡Œä¸ºé…ç½®
- ä»»åŠ¡ç±»å‹å®šä¹‰
- æ‰§è¡Œæ¨¡å¼è®¾ç½®

### Git Hooksé…ç½®
`.git/hooks/`
- pre-commit: è´¨é‡æ£€æŸ¥
- commit-msg: æ¶ˆæ¯æ ¼å¼
- pre-push: æœ€ç»ˆéªŒè¯

## ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹

### å®Œæ•´å·¥ä½œæµç¤ºä¾‹
```bash
# 1. ä»»åŠ¡å¼€å§‹ - è‡ªåŠ¨ä»»åŠ¡åˆ†æ
"å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½"
â†’ perfect21_task_analyzerè¯†åˆ«ä¸ºauthenticationä»»åŠ¡

# 2. Agenté€‰æ‹© - è‡ªåŠ¨éªŒè¯
ä½¿ç”¨5ä¸ªagentså¹¶è¡Œæ‰§è¡Œ
â†’ perfect21_agent_validatoréªŒè¯é€šè¿‡
â†’ perfect21_parallel_checkerç¡®è®¤å¹¶è¡Œ

# 3. ä»£ç æ‰§è¡Œ - è´¨é‡æé†’
ç¼–è¾‘auth.pyæ–‡ä»¶
â†’ perfect21_quality_gatesæä¾›Pythonæœ€ä½³å®è·µ

# 4. æµ‹è¯•è¿è¡Œ - è‡ªåŠ¨æ£€æŸ¥
è¿è¡Œpytest
â†’ perfect21_quality_gatesç›‘æ§æµ‹è¯•ç»“æœ

# 5. Gitæäº¤ - åŒé‡éªŒè¯
git commit -m "feat: æ·»åŠ ç”¨æˆ·ç™»å½•"
â†’ perfect21_git_bridgeé¢„æ£€æŸ¥
â†’ git pre-commit hookæ‰§è¡Œ

# 6. æ¨é€ä»£ç 
git push
â†’ pre-push hookæœ€ç»ˆéªŒè¯
```

## ğŸ¨ å·¥ä½œæµå¯è§†åŒ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Perfect21 ç»Ÿä¸€å·¥ä½œæµ              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  Claude Hooks                Git Hooks     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Task      â”‚              â”‚pre-commitâ”‚   â”‚
â”‚  â”‚Analyzer  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â†‘        â”‚
â”‚       â†“                          â”‚        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Agent     â”‚              â”‚commit-msgâ”‚   â”‚
â”‚  â”‚Validator â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â†‘        â”‚
â”‚       â†“                          â”‚        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Bridge    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Quality   â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚pre-push  â”‚   â”‚
â”‚  â”‚Gates     â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… é›†æˆéªŒè¯

### éªŒè¯å‘½ä»¤
```bash
# æµ‹è¯•Claude hooks
cd .claude/hooks
./test_hooks.sh

# æµ‹è¯•Git hooks
git add test.txt
git commit -m "test: éªŒè¯hooks"

# æŸ¥çœ‹å·¥ä½œæµæ—¥å¿—
tail -f /tmp/perfect21_workflow.log
```

### é›†æˆæŒ‡æ ‡
- âœ… Claudeæ“ä½œ100%è¦†ç›–
- âœ… Gitæ“ä½œ100%é›†æˆ
- âœ… å·¥ä½œæµçŠ¶æ€å®æ—¶è¿½è¸ª
- âœ… æ—¥å¿—è®°å½•å®Œæ•´ç»Ÿä¸€

## ğŸŒŸ æ€»ç»“

Perfect21ç°åœ¨æä¾›äº†ä¸€ä¸ª**å®Œæ•´çš„ã€è‡ªåŠ¨åŒ–çš„ã€ç«¯åˆ°ç«¯**çš„å·¥ä½œæµï¼š

1. **ä»æƒ³æ³•åˆ°ä»£ç ** - ä»»åŠ¡åˆ†æå’ŒAgenté€‰æ‹©
2. **ä»ä»£ç åˆ°è´¨é‡** - è‡ªåŠ¨è´¨é‡æ£€æŸ¥
3. **ä»è´¨é‡åˆ°æäº¤** - Gité›†æˆéªŒè¯
4. **ä»æäº¤åˆ°éƒ¨ç½²** - å®Œæ•´æµç¨‹è¿½è¸ª

æ‰€æœ‰ç¯èŠ‚éƒ½é€šè¿‡hooksè‡ªåŠ¨æ‰§è¡Œï¼Œå½¢æˆäº†ä¸€ä¸ª**æ™ºèƒ½åŒ–çš„å¼€å‘å·¥ä½œæµ**ï¼