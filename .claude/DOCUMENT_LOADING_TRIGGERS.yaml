# ðŸ“‹ Claude Enhanceræ–‡æ¡£æ™ºèƒ½åŠ è½½è§¦å‘å™¨é…ç½®
# å®šä¹‰ä»€ä¹ˆæƒ…å†µä¸‹åŠ è½½å“ªäº›æ–‡æ¡£ï¼Œé¿å…ä¸Šä¸‹æ–‡æ±¡æŸ“

# ðŸŽ¯ æ ¸å¿ƒåŽŸåˆ™
# P0: å¿…é¡»åŠ è½½ï¼ˆæ¯æ¬¡ä»»åŠ¡ï¼‰- æ ¸å¿ƒå·¥ä½œæµæ–‡æ¡£
# P1: é«˜é¢‘åŠ è½½ï¼ˆå¤§éƒ¨åˆ†ä»»åŠ¡ï¼‰- å¸¸ç”¨ç­–ç•¥æ–‡æ¡£
# P2: æ¡ä»¶åŠ è½½ï¼ˆç‰¹å®šåœºæ™¯ï¼‰- æž¶æž„å’Œä¸“ä¸šæ–‡æ¡£
# P3: ç½•è§åŠ è½½ï¼ˆæ•…éšœæŽ’æŸ¥ï¼‰- é—®é¢˜è§£å†³æ–‡æ¡£

# =====================================
# ðŸ“Š Priority Level 0 - å¿…é¡»åŠ è½½
# =====================================
P0_CRITICAL:
  trigger_condition: "ALWAYS"  # ä»»ä½•ä»»åŠ¡éƒ½åŠ è½½
  max_tokens: 5000
  documents:
    WORKFLOW.md:
      description: "8-Phaseå·¥ä½œæµæ¡†æž¶"
      size_tokens: 2000
      categories: ["workflow", "core", "phase"]
      always_load: true

    AGENT_STRATEGY.md:
      description: "4-6-8 Agentç­–ç•¥"
      size_tokens: 1500
      categories: ["agent", "strategy", "core"]
      always_load: true

    SAFETY_RULES.md:
      description: "å®‰å…¨è§„åˆ™å’Œé™åˆ¶"
      size_tokens: 1200
      categories: ["safety", "rules", "protection"]
      always_load: true

# =====================================
# ðŸ“ˆ Priority Level 1 - é«˜é¢‘åŠ è½½
# =====================================
P1_HIGH_FREQUENCY:
  trigger_condition: "phase >= 1 OR complexity != 'simple'"
  max_tokens: 8000
  documents:
    PHASE_AGENT_STRATEGY.md:
      description: "Phaseä¸ŽAgentæ˜ å°„ç­–ç•¥"
      size_tokens: 1800
      categories: ["phase", "agent", "mapping"]
      triggers:
        phases: [1, 2, 3]
        task_types: ["æ–°åŠŸèƒ½å¼€å‘", "æ ‡å‡†ä»»åŠ¡"]

    SELF_CHECK_MECHANISM.md:
      description: "è‡ªæ£€æœºåˆ¶å’Œè´¨é‡æŽ§åˆ¶"
      size_tokens: 1000
      categories: ["quality", "check", "validation"]
      triggers:
        phases: [3, 4, 5]
        keywords: ["è´¨é‡", "æ£€æŸ¥", "éªŒè¯"]

    OUTPUT_CONTROL_STRATEGY.md:
      description: "è¾“å‡ºé•¿åº¦å’Œæ ¼å¼æŽ§åˆ¶"
      size_tokens: 800
      categories: ["output", "control", "format"]
      triggers:
        always_after_phase: 2

# =====================================
# ðŸ—ï¸ Priority Level 2 - æž¶æž„æ¡ä»¶åŠ è½½
# =====================================
P2_ARCHITECTURE:
  trigger_condition: "architecture_needs = true"
  max_tokens: 15000
  documents:
    ARCHITECTURE/v2.0-FOUNDATION.md:
      description: "å››å±‚æž¶æž„åŸºç¡€å®šä¹‰"
      size_tokens: 3000
      categories: ["architecture", "foundation", "design"]
      triggers:
        keywords: ["æž¶æž„", "é‡æž„", "è®¾è®¡", "ç³»ç»Ÿ", "åŸºç¡€"]
        task_types: ["æž¶æž„è®¾è®¡", "é‡æž„ä¼˜åŒ–", "æ–°åŠŸèƒ½å¼€å‘"]
        complexity: ["æ ‡å‡†", "å¤æ‚"]

    ARCHITECTURE/LAYER-DEFINITION.md:
      description: "L0-L3å±‚è¯¦ç»†å®šä¹‰"
      size_tokens: 2500
      categories: ["architecture", "layers", "dependencies"]
      triggers:
        keywords: ["åˆ†å±‚", "L0", "L1", "L2", "L3", "ä¾èµ–", "å±‚çº§"]
        task_types: ["æž¶æž„è®¾è®¡", "é‡æž„ä¼˜åŒ–"]
        conditions:
          - "new_module = true"
          - "layer_decision = true"

    ARCHITECTURE/GROWTH-STRATEGY.md:
      description: "Featureåˆ†çº§å’Œæˆé•¿ç­–ç•¥"
      size_tokens: 2000
      categories: ["architecture", "growth", "features"]
      triggers:
        keywords: ["æ–°åŠŸèƒ½", "feature", "åˆ†çº§", "basic", "standard", "advanced"]
        task_types: ["æ–°åŠŸèƒ½å¼€å‘"]
        conditions:
          - "new_feature = true"
          - "feature_classification = true"

    ARCHITECTURE/NAMING-CONVENTIONS.md:
      description: "å‘½åè§„èŒƒå’Œçº¦å®š"
      size_tokens: 1500
      categories: ["architecture", "naming", "conventions"]
      triggers:
        keywords: ["å‘½å", "è§„èŒƒ", "çº¦å®š", "æ–‡ä»¶å", "å˜é‡"]
        phases: [2, 3]
        task_types: ["æ–°åŠŸèƒ½å¼€å‘", "é‡æž„ä¼˜åŒ–"]

# =====================================
# ðŸ¤– Priority Level 2 - ä¸“ä¸šAgentåŠ è½½
# =====================================
P2_AGENT_SPECIALISTS:
  trigger_condition: "tech_stack_detected OR phase = 3"
  max_tokens: 6000

  # åŽç«¯æŠ€æœ¯æ ˆ
  backend_stack:
    triggers:
      tech_keywords: ["python", "golang", "java", "backend", "api", "æ•°æ®åº“"]
      task_types: ["æ–°åŠŸèƒ½å¼€å‘", "Bugä¿®å¤", "æ€§èƒ½ä¼˜åŒ–"]
    documents:
      - "agents/backend-architect.md"
      - "agents/backend-engineer.md"
      - "agents/database-specialist.md"

  # å‰ç«¯æŠ€æœ¯æ ˆ
  frontend_stack:
    triggers:
      tech_keywords: ["react", "vue", "angular", "frontend", "ui", "ç•Œé¢"]
      task_types: ["æ–°åŠŸèƒ½å¼€å‘", "Bugä¿®å¤", "UIä¼˜åŒ–"]
    documents:
      - "agents/frontend-engineer.md"
      - "agents/react-pro.md"
      - "agents/vue-specialist.md"

  # æµ‹è¯•ç›¸å…³
  testing_stack:
    triggers:
      tech_keywords: ["æµ‹è¯•", "test", "unit", "integration", "e2e"]
      task_types: ["æµ‹è¯•ç›¸å…³", "è´¨é‡ä¿è¯"]
      phases: [4, 5]
    documents:
      - "agents/test-engineer.md"
      - "agents/e2e-test-specialist.md"
      - "agents/performance-tester.md"

  # å®‰å…¨ç›¸å…³
  security_stack:
    triggers:
      tech_keywords: ["å®‰å…¨", "security", "æƒé™", "è®¤è¯", "åŠ å¯†"]
      task_types: ["å®‰å…¨å®¡è®¡", "æ–°åŠŸèƒ½å¼€å‘"]
      security_needs: true
    documents:
      - "agents/security-auditor.md"

  # DevOpsç›¸å…³
  devops_stack:
    triggers:
      tech_keywords: ["éƒ¨ç½²", "docker", "kubernetes", "CI/CD", "è¿ç»´"]
      task_types: ["éƒ¨ç½²è¿ç»´", "æ€§èƒ½ä¼˜åŒ–"]
    documents:
      - "agents/devops-engineer.md"
      - "agents/kubernetes-expert.md"
      - "agents/deployment-manager.md"

# =====================================
# ðŸš¨ Priority Level 3 - ç½•è§åŠ è½½
# =====================================
P3_RARE_CASES:
  trigger_condition: "explicit_request OR troubleshooting = true"
  max_tokens: 5000
  documents:
    ISSUES_AND_SOLUTIONS.md:
      description: "é—®é¢˜æŽ’æŸ¥å’Œè§£å†³æ–¹æ¡ˆ"
      size_tokens: 1800
      categories: ["troubleshooting", "problems", "solutions"]
      triggers:
        keywords: ["é—®é¢˜", "é”™è¯¯", "æ•…éšœ", "æŽ’æŸ¥", "è§£å†³", "issue"]
        task_types: ["Bugä¿®å¤", "æ•…éšœæŽ’æŸ¥"]
        explicit_request: true

    CLEANUP_STRATEGY.md:
      description: "æ¸…ç†ç­–ç•¥å’Œç»´æŠ¤"
      size_tokens: 1200
      categories: ["cleanup", "maintenance", "optimization"]
      triggers:
        keywords: ["æ¸…ç†", "ç»´æŠ¤", "cleanup", "optimize"]
        phases: [0, 5, 7]  # å¼€å§‹ã€æäº¤ã€éƒ¨ç½²é˜¶æ®µ
        explicit_request: true

    CONSISTENCY_ISSUES.md:
      description: "ä¸€è‡´æ€§é—®é¢˜å¤„ç†"
      size_tokens: 1000
      categories: ["consistency", "conflicts", "resolution"]
      triggers:
        keywords: ["ä¸€è‡´æ€§", "å†²çª", "consistency", "conflict"]
        explicit_request: true

# =====================================
# ðŸŽ® æ™ºèƒ½è§¦å‘è§„åˆ™
# =====================================
SMART_TRIGGERS:
  # Phase-basedè§¦å‘
  phase_triggers:
    phase_0:  # åˆ†æ”¯åˆ›å»º
      required: ["WORKFLOW.md", "AGENT_STRATEGY.md"]
      optional: ["CLEANUP_STRATEGY.md"]

    phase_1:  # éœ€æ±‚åˆ†æž
      required: ["WORKFLOW.md", "AGENT_STRATEGY.md", "PHASE_AGENT_STRATEGY.md"]
      conditional:
        - if: "complex_task"
          then: ["ARCHITECTURE/GROWTH-STRATEGY.md"]

    phase_2:  # è®¾è®¡è§„åˆ’
      required: ["WORKFLOW.md", "AGENT_STRATEGY.md", "PHASE_AGENT_STRATEGY.md"]
      conditional:
        - if: "new_feature OR architecture_change"
          then: ["ARCHITECTURE/v2.0-FOUNDATION.md", "ARCHITECTURE/LAYER-DEFINITION.md"]
        - if: "naming_decisions"
          then: ["ARCHITECTURE/NAMING-CONVENTIONS.md"]

    phase_3:  # å®žçŽ°å¼€å‘
      required: ["WORKFLOW.md", "AGENT_STRATEGY.md", "SAFETY_RULES.md"]
      conditional:
        - if: "tech_stack_detected"
          then: "load_relevant_agent_docs"
        - if: "security_sensitive"
          then: ["agents/security-auditor.md"]

    phase_4:  # æœ¬åœ°æµ‹è¯•
      required: ["WORKFLOW.md", "SELF_CHECK_MECHANISM.md"]
      conditional:
        - if: "testing_focus"
          then: ["agents/test-engineer.md", "agents/e2e-test-specialist.md"]

    phase_5:  # ä»£ç æäº¤
      required: ["WORKFLOW.md", "SAFETY_RULES.md", "OUTPUT_CONTROL_STRATEGY.md"]
      optional: ["CLEANUP_STRATEGY.md"]

  # ä»»åŠ¡ç±»åž‹è§¦å‘
  task_type_triggers:
    "æ–°åŠŸèƒ½å¼€å‘":
      priority_docs: ["ARCHITECTURE/GROWTH-STRATEGY.md", "ARCHITECTURE/LAYER-DEFINITION.md"]
      agent_categories: ["backend", "frontend", "testing"]

    "Bugä¿®å¤":
      priority_docs: ["ISSUES_AND_SOLUTIONS.md"]
      agent_categories: ["testing", "debugging"]
      complexity_override: "simple"  # é€šå¸¸ä½¿ç”¨4ä¸ªAgent

    "é‡æž„ä¼˜åŒ–":
      priority_docs: ["ARCHITECTURE/v2.0-FOUNDATION.md", "ARCHITECTURE/LAYER-DEFINITION.md"]
      agent_categories: ["backend", "architecture"]

    "å®‰å…¨å®¡è®¡":
      priority_docs: ["SAFETY_RULES.md"]
      agent_categories: ["security"]
      required_agents: ["security-auditor"]

  # å…³é”®è¯è§¦å‘æ˜ å°„
  keyword_triggers:
    architecture_keywords:
      words: ["æž¶æž„", "é‡æž„", "è®¾è®¡", "åˆ†å±‚", "æ¨¡å—"]
      docs: ["ARCHITECTURE/v2.0-FOUNDATION.md", "ARCHITECTURE/LAYER-DEFINITION.md"]

    security_keywords:
      words: ["å®‰å…¨", "æƒé™", "è®¤è¯", "åŠ å¯†", "æ¼æ´ž"]
      docs: ["SAFETY_RULES.md", "agents/security-auditor.md"]

    performance_keywords:
      words: ["æ€§èƒ½", "ä¼˜åŒ–", "ç¼“å­˜", "æ…¢æŸ¥è¯¢", "å†…å­˜"]
      docs: ["agents/performance-engineer.md", "CLEANUP_STRATEGY.md"]

    testing_keywords:
      words: ["æµ‹è¯•", "test", "å•å…ƒæµ‹è¯•", "é›†æˆæµ‹è¯•"]
      docs: ["agents/test-engineer.md", "agents/e2e-test-specialist.md"]

# =====================================
# ðŸ”§ åŠ è½½ä¼˜åŒ–é…ç½®
# =====================================
LOADING_OPTIMIZATION:
  # Tokené™åˆ¶
  token_limits:
    simple_task: 15000      # ç®€å•ä»»åŠ¡Tokené™åˆ¶
    standard_task: 30000    # æ ‡å‡†ä»»åŠ¡Tokené™åˆ¶
    complex_task: 50000     # å¤æ‚ä»»åŠ¡Tokené™åˆ¶
    architecture_task: 60000 # æž¶æž„ä»»åŠ¡Tokené™åˆ¶

  # ç¼“å­˜ç­–ç•¥
  cache_strategy:
    permanent_cache:        # æ°¸ä¹…ç¼“å­˜ï¼ˆé™¤éžæ–‡æ¡£æ›´æ–°ï¼‰
      - "WORKFLOW.md"
      - "AGENT_STRATEGY.md"
      - "SAFETY_RULES.md"

    session_cache:          # ä¼šè¯æœŸé—´ç¼“å­˜
      - "PHASE_AGENT_STRATEGY.md"
      - "SELF_CHECK_MECHANISM.md"
      - "OUTPUT_CONTROL_STRATEGY.md"

    temporary_cache:        # ä¸´æ—¶ç¼“å­˜ï¼ˆç”¨å®Œå³æ¸…ï¼‰
      - "ISSUES_AND_SOLUTIONS.md"
      - "CLEANUP_STRATEGY.md"
      - "agents/*.md"

  # é¢„åŠ è½½ç­–ç•¥
  preload_strategy:
    phase_prediction:       # æ ¹æ®Phaseé¢„æµ‹ä¸‹ä¸ªé˜¶æ®µéœ€è¦çš„æ–‡æ¡£
      enabled: true
      lookahead: 1          # é¢„æµ‹ä¸‹1ä¸ªPhase

    pattern_learning:       # æ ¹æ®åŽ†å²ä½¿ç”¨æ¨¡å¼å­¦ä¹ 
      enabled: true
      confidence_threshold: 0.8

# =====================================
# ðŸ“Š ç›‘æŽ§å’Œç»Ÿè®¡
# =====================================
MONITORING:
  metrics:
    - "documents_loaded_per_task"
    - "token_usage_per_task"
    - "cache_hit_rate"
    - "loading_time_ms"
    - "user_satisfaction_score"

  optimization_triggers:
    - "token_usage > limit"
    - "cache_miss_rate > 30%"
    - "loading_time > 1000ms"
    - "satisfaction_score < 0.8"

# =====================================
# ðŸš€ æœªæ¥æ‰©å±•ç‚¹
# =====================================
FUTURE_EXTENSIONS:
  ai_driven_optimization:
    - "è‡ªåŠ¨å­¦ä¹ æœ€ä½³æ–‡æ¡£ç»„åˆ"
    - "åŠ¨æ€è°ƒæ•´è§¦å‘æ¡ä»¶"
    - "é¢„æµ‹ç”¨æˆ·éœ€æ±‚"

  contextual_compression:
    - "æ™ºèƒ½æ–‡æ¡£æ‘˜è¦"
    - "å…³é”®ä¿¡æ¯æå–"
    - "åŠ¨æ€å†…å®¹è¿‡æ»¤"