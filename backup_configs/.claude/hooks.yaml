# VibePilot Claude Code 启动钩子配置
# 自动触发会话保护系统

hooks:
  # Claude Code 启动时自动执行会话保护
  on_startup:
    - name: "session_protection_init"
      description: "自动初始化会话保护系统"
      command: "./scripts/ensure-session-protection.sh"
      async: true
      timeout: 30
      
  # 每次对话开始前检查会话状态  
  on_conversation_start:
    - name: "session_status_check"
      description: "检查tmux会话状态"
      command: "./scripts/session-keeper.sh status --quiet"
      async: true
      timeout: 10
      
  # 重要对话后自动更新日志
  on_important_response:
    - name: "update_session_journal"
      description: "更新会话日志"
      command: "./scripts/update-session-journal.sh"
      async: true
      timeout: 5

# 钩子配置选项
options:
  # 启用自动会话保护
  auto_session_protection: true
  
  # 静默模式（减少输出干扰）
  quiet_mode: true
  
  # 失败时继续（不阻塞Claude启动）
  continue_on_failure: true
  
  # 日志记录
  log_hooks: true
  log_file: "logs/claude-hooks.log"