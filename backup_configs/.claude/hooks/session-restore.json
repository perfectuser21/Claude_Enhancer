{
  "name": "session-restore",
  "description": "ä¼šè¯å¯åŠ¨æ—¶æ¢å¤å·¥ä½œæµçŠ¶æ€å’Œçº¦æŸï¼Œç¡®ä¿ç»§ç»­ä½¿ç”¨å­ä»£ç†",
  "event": "SessionStart",
  "matcher": {},
  "action": "#!/bin/bash\nset -euo pipefail\n\n# æ£€æŸ¥è®°å¿†æ–‡ä»¶\nMEMORY_FILE=\"eval/memory/workflow_context.json\"\nTIMESTAMP=$(date -u +\"%Y-%m-%dT%H:%M:%SZ\")\n\necho \"[$TIMESTAMP] Restoring workflow context...\"\n\nif [[ ! -f \"$MEMORY_FILE\" ]]; then\n    echo \"â„¹ï¸  é¦–æ¬¡å¯åŠ¨æˆ–æ— ä¿å­˜çš„ä¸Šä¸‹æ–‡ï¼Œä½¿ç”¨é»˜è®¤ VibePilot é…ç½®\"\n    \n    # åˆ›å»ºé»˜è®¤æé†’\n    cat <<EOF\nğŸš VibePilot Enhanced V2 Max å·²å¯åŠ¨ï¼\n\nå·¥ä½œæµçº¦æŸå·²æ¿€æ´»ï¼š\nâœ… å¿…é¡»ä½¿ç”¨å­ä»£ç†å®Œæˆå¼€å‘ä»»åŠ¡\nâœ… æŒ‰é¡ºåºè°ƒç”¨ï¼šspec-planner â†’ developer-coder â†’ test-runner â†’ code-reviewer â†’ commit-bot â†’ coach-qa\nâœ… åªæœ‰ developer-coder å¯ä»¥ç¼–å†™ä»£ç \nâœ… æ¯ä¸ªå­ä»£ç†å¿…é¡»è¾“å‡º SELF-EVAL\nâœ… è´¨é‡é—¨ç¦ï¼šå¿…é¡»ç”Ÿæˆ tests.json å’Œ review.md\n\nå¼€å§‹ä½¿ç”¨ï¼š\"è¯·ä½¿ç”¨ VibePilot å·¥ä½œæµå¸®æˆ‘å®ç° [åŠŸèƒ½æè¿°]\"\nEOF\n    \n    exit 0\nfi\n\n# è¯»å–ä¿å­˜çš„ä¸Šä¸‹æ–‡\nSAVED_AT=$(jq -r '.saved_at' \"$MEMORY_FILE\")\nWORKFLOW_STATE=$(jq -r '.current_state' \"$MEMORY_FILE\")\nACTIVE_FEATURE=$(jq -r '.active_feature.name' \"$MEMORY_FILE\")\nFEATURE_STATUS=$(jq -r '.active_feature.status' \"$MEMORY_FILE\")\nLAST_COMPLETED=$(jq -r '.current_state.last_completed // \"none\"' \"$MEMORY_FILE\")\nWORKFLOW_NEXT=$(jq -r '.current_state.workflow_next // \"spec-planner\"' \"$MEMORY_FILE\")\n\necho \"ğŸ“‹ å‘ç°ä¿å­˜çš„å·¥ä½œæµçŠ¶æ€ï¼ˆä¿å­˜æ—¶é—´ï¼š$SAVED_ATï¼‰\"\n\n# æ¢å¤æé†’ä¿¡æ¯\ncat <<EOF\nğŸ”„ VibePilot å·¥ä½œæµçŠ¶æ€æ¢å¤æˆåŠŸï¼\n\nå½“å‰çŠ¶æ€ï¼š\nâ€¢ æœ€åå®Œæˆçš„å­ä»£ç†ï¼š$LAST_COMPLETED\nâ€¢ å»ºè®®ä¸‹ä¸€æ­¥ï¼š$WORKFLOW_NEXT\nâ€¢ æ´»è·ƒåŠŸèƒ½ï¼š${ACTIVE_FEATURE:-\"æ— \"} (${FEATURE_STATUS:-\"æœªçŸ¥\"})\n\nğŸš å·¥ä½œæµçº¦æŸä¿æŒæ¿€æ´»ï¼š\nâœ… å¿…é¡»æŒ‰é¡ºåºä½¿ç”¨å­ä»£ç†\nâœ… åªæœ‰ developer-coder ç¼–å†™ä»£ç   \nâœ… æ¯æ­¥å®Œæˆåç”Ÿæˆè¯æ®æ–‡ä»¶\nâœ… SELF-EVAL æ ¼å¼å¿…é¡»åŒ…å«\n\nç»§ç»­å·¥ä½œæµï¼š\nEOF\n\nif [[ \"$LAST_COMPLETED\" == \"none\" || \"$LAST_COMPLETED\" == \"null\" ]]; then\n    echo \"â€¢ å¼€å§‹æ–°åŠŸèƒ½ï¼š'è¯·ç”¨ spec-planner åˆ†æéœ€æ±‚ï¼š[æè¿°]'\"\nelif [[ \"$WORKFLOW_NEXT\" == \"complete\" ]]; then\n    echo \"â€¢ ä¸Šä¸ªåŠŸèƒ½å·²å®Œæˆï¼Œå¯å¼€å§‹æ–°åŠŸèƒ½å¼€å‘\"\nelse\n    case \"$WORKFLOW_NEXT\" in\n        \"developer-coder\")\n            echo \"â€¢ éœ€æ±‚å·²åˆ†æï¼Œå»ºè®®ï¼š'è°ƒç”¨ developer-coder å¼€å§‹ç¼–ç å®ç°'\"\n            ;;\n        \"test-runner\")\n            echo \"â€¢ ä»£ç å·²å®ç°ï¼Œå»ºè®®ï¼š'è°ƒç”¨ test-runner æ‰§è¡Œæµ‹è¯•éªŒè¯'\"\n            ;;\n        \"code-reviewer\")\n            echo \"â€¢ æµ‹è¯•å·²é€šè¿‡ï¼Œå»ºè®®ï¼š'è°ƒç”¨ code-reviewer è¿›è¡Œè´¨é‡å®¡æŸ¥'\"\n            ;;\n        \"commit-bot\")\n            echo \"â€¢ å®¡æŸ¥å·²é€šè¿‡ï¼Œå»ºè®®ï¼š'è°ƒç”¨ commit-bot æäº¤ä»£ç '\"\n            ;;\n        \"coach-qa\")\n            echo \"â€¢ ä»£ç å·²æäº¤ï¼Œå¯é€‰ï¼š'è°ƒç”¨ coach-qa è·å–æ”¹è¿›å»ºè®®'\"\n            ;;\n        *)\n            echo \"â€¢ ç»§ç»­ä¹‹å‰çš„å·¥ä½œæˆ–å¼€å§‹æ–°åŠŸèƒ½å¼€å‘\"\n            ;;\n    esac\nfi\n\n# è®°å½•æ¢å¤æ—¥å¿—\necho \"[$TIMESTAMP] Session restored: last=$LAST_COMPLETED, next=$WORKFLOW_NEXT\" >> \"eval/logs/memory.log\"\n\nexit 0",
  "enabled": true,\  "timeout": 3000,\  "scope": "project"\}",
  "enabled": true,
  "timeout": 3000,
  "scope": "project"
}