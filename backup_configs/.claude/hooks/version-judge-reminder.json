{
  "name": "version-judge-reminder",
  "description": "ç‰ˆæœ¬åˆ¤å®šæé†’ - åœ¨ä»£ç å˜æ›´åŽæé†’è¿›è¡Œç‰ˆæœ¬åˆ¤å®š",
  "event": "PostToolUse",
  "matcher": {
    "tool": ["Edit", "Write", "MultiEdit"],
    "file_extension": [".py", ".js", ".ts", ".yaml", ".json", ".sh"]
  },
  "action": "#!/bin/bash\nset -euo pipefail\n\n# ç‰ˆæœ¬åˆ¤å®šæé†’è„šæœ¬\nPROJECT_ROOT=\"$(pwd)\"\nVERSION_JUDGE_SCRIPT=\"$PROJECT_ROOT/scripts/version-judge.sh\"\nLOG_FILE=\"$PROJECT_ROOT/eval/logs/version_reminders.log\"\nTIMESTAMP=$(date -u +\"%Y-%m-%dT%H:%M:%SZ\")\n\n# åˆ›å»ºæ—¥å¿—ç›®å½•\nmkdir -p \"$(dirname \"$LOG_FILE\")\"\n\n# èŽ·å–å·¥å…·å’Œæ–‡ä»¶ä¿¡æ¯\nTOOL_TYPE=$(echo \"$CLAUDE_TOOL_INPUT\" | jq -r '.tool_name // \"unknown\"')\nFILE_PATH=$(echo \"$CLAUDE_TOOL_INPUT\" | jq -r '.file_path // \"\"')\n\necho \"[$TIMESTAMP] Code change detected: $TOOL_TYPE on $FILE_PATH\" >> \"$LOG_FILE\"\n\n# æ£€æŸ¥æ˜¯å¦æ˜¯æœ‰æ„ä¹‰çš„ä»£ç å˜æ›´\nif [[ -z \"$FILE_PATH\" ]]; then\n    echo \"[$TIMESTAMP] No file path, skipping reminder\" >> \"$LOG_FILE\"\n    exit 0\nfi\n\n# æ£€æŸ¥æ–‡ä»¶ç±»åž‹æ˜¯å¦éœ€è¦ç‰ˆæœ¬åˆ¤å®š\nSIGNIFICANT_PATTERNS=(\n    \"modules/\"\n    \"main/\"\n    \"scripts/\"\n    \".claude/\"\n    \"config/\"\n)\n\nIS_SIGNIFICANT=false\nfor pattern in \"${SIGNIFICANT_PATTERNS[@]}\"; do\n    if [[ \"$FILE_PATH\" == *\"$pattern\"* ]]; then\n        IS_SIGNIFICANT=true\n        break\n    fi\ndone\n\nif [[ \"$IS_SIGNIFICANT\" == \"false\" ]]; then\n    echo \"[$TIMESTAMP] File not significant for versioning: $FILE_PATH\" >> \"$LOG_FILE\"\n    exit 0\nfi\n\n# æ£€æŸ¥ç‰ˆæœ¬åˆ¤å®šè„šæœ¬æ˜¯å¦å­˜åœ¨\nif [[ ! -f \"$VERSION_JUDGE_SCRIPT\" ]]; then\n    echo \"[$TIMESTAMP] Version judge script not found: $VERSION_JUDGE_SCRIPT\" >> \"$LOG_FILE\"\n    echo \"âš ï¸  ç‰ˆæœ¬åˆ¤å®šè„šæœ¬æœªæ‰¾åˆ°ï¼Œæ— æ³•æä¾›ç‰ˆæœ¬å»ºè®®\"\n    exit 0\nfi\n\n# æ£€æŸ¥æœ€è¿‘æ˜¯å¦å·²ç»æé†’è¿‡ï¼ˆé¿å…é¢‘ç¹æé†’ï¼‰\nREMINDER_MARKER=\"$PROJECT_ROOT/.vibepilot/last_reminder\"\nif [[ -f \"$REMINDER_MARKER\" ]]; then\n    LAST_REMINDER=$(cat \"$REMINDER_MARKER\")\n    CURRENT_TIME=$(date +%s)\n    # å¦‚æžœè·ç¦»ä¸Šæ¬¡æé†’ä¸åˆ° 10 åˆ†é’Ÿï¼Œè·³è¿‡\n    if [[ $((CURRENT_TIME - LAST_REMINDER)) -lt 600 ]]; then\n        echo \"[$TIMESTAMP] Recently reminded, skipping\" >> \"$LOG_FILE\"\n        exit 0\n    fi\nfi\n\n# è®°å½•æé†’æ—¶é—´\ndate +%s > \"$REMINDER_MARKER\"\n\n# æ˜¾ç¤ºç‰ˆæœ¬åˆ¤å®šæé†’\necho \"\"\necho \"ðŸ’¡ ç‰ˆæœ¬åˆ¤å®šæé†’\"\necho \"================\"\necho \"æ£€æµ‹åˆ°é‡è¦æ–‡ä»¶å˜æ›´: $FILE_PATH\"\necho \"\"\necho \"å»ºè®®æ“ä½œ:\"\necho \"  1. è¿è¡Œç‰ˆæœ¬åˆ¤å®šå‘å¯¼: ./scripts/version-judge.sh\"\necho \"  2. æˆ–æ‰‹åŠ¨å‡çº§ç‰ˆæœ¬: ./scripts/bump-version.sh [patch|iteration|milestone]\"\necho \"  3. æŸ¥çœ‹å½“å‰ç‰ˆæœ¬: cat .vibepilot/VERSION\"\necho \"\"\necho \"ä¸‰çº§ç‰ˆæœ¬è§„èŒƒ:\"\necho \"  ðŸ”– Patch (å¾®è°ƒ):     ä»£ç é€»è¾‘å¾®è°ƒã€Bugä¿®å¤\"\necho \"  ðŸ“Œ Iteration (è¿­ä»£): åŠŸèƒ½æ¨¡å—æ›´æ–°ã€å±€éƒ¨é‡æž„\"\necho \"  ðŸš¨ Milestone (å‡çº§): æž¶æž„é‡æž„ã€é‡å¤§å˜æ›´\"\n\n# è®°å½•æé†’æ—¥å¿—\necho \"[$TIMESTAMP] REMINDER: Suggested version check for $FILE_PATH\" >> \"$LOG_FILE\"\n\nexit 0",
  "enabled": true,
  "timeout": 5000,
  "scope": "project"
}