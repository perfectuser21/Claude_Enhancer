{
  "test_config": {
    "name": "Claude Enhancer 5.1 E2E Test Suite",
    "version": "1.0.0",
    "description": "全面端到端测试配置",
    "test_environments": {
      "development": {
        "project_root": ".",
        "git_required": true,
        "hooks_required": true,
        "timeout_default": 30
      },
      "ci": {
        "project_root": ".",
        "git_required": true,
        "hooks_required": false,
        "timeout_default": 60
      }
    }
  },
  "phase_configurations": {
    "P0_branch_creation": {
      "required_hooks": ["branch_helper"],
      "success_criteria": ["branch_created", "environment_ready"],
      "timeout_seconds": 10,
      "retry_count": 2
    },
    "P1_requirements_analysis": {
      "required_hooks": ["p1_requirements_analyzer"],
      "success_criteria": ["requirements_understood", "scope_defined"],
      "timeout_seconds": 15,
      "retry_count": 1
    },
    "P2_design_planning": {
      "required_hooks": ["design_advisor"],
      "success_criteria": ["architecture_defined", "tech_stack_chosen"],
      "timeout_seconds": 20,
      "retry_count": 1,
      "optional": true
    },
    "P3_implementation": {
      "required_hooks": ["smart_agent_selector", "agent-output-summarizer"],
      "success_criteria": ["code_implemented", "agents_coordinated"],
      "timeout_seconds": 25,
      "retry_count": 2,
      "agent_strategies": {
        "simple": 4,
        "standard": 6,
        "complex": 8
      }
    },
    "P4_local_testing": {
      "required_hooks": ["testing_coordinator"],
      "success_criteria": ["tests_passed", "functionality_verified"],
      "timeout_seconds": 30,
      "retry_count": 3,
      "optional": true
    },
    "P5_code_commit": {
      "required_hooks": ["commit_quality_gate"],
      "success_criteria": ["code_committed", "quality_checks_passed"],
      "timeout_seconds": 15,
      "retry_count": 2,
      "optional": true
    },
    "P6_code_review": {
      "required_hooks": ["review_preparation"],
      "success_criteria": ["pr_created", "review_ready"],
      "timeout_seconds": 10,
      "retry_count": 1,
      "optional": true
    }
  },
  "hook_test_scenarios": {
    "smart_agent_selector": [
      {
        "name": "simple_task",
        "input": {
          "task_type": "bug_fix",
          "complexity": "low"
        },
        "expected_output": ["4", "agent"],
        "timeout": 5
      },
      {
        "name": "standard_task",
        "input": {
          "task_type": "feature_implementation",
          "complexity": "medium"
        },
        "expected_output": ["6", "agent"],
        "timeout": 5
      },
      {
        "name": "complex_task",
        "input": {
          "task_type": "system_architecture",
          "complexity": "high"
        },
        "expected_output": ["8", "agent"],
        "timeout": 5
      }
    ],
    "error_handler": [
      {
        "name": "timeout_error",
        "input": {
          "error_type": "timeout",
          "error_message": "Agent execution timeout"
        },
        "expected_output": ["timeout", "retry"],
        "timeout": 3
      },
      {
        "name": "git_error",
        "input": {
          "error_type": "git",
          "error_message": "Git merge conflict"
        },
        "expected_output": ["conflict", "merge"],
        "timeout": 3
      }
    ],
    "performance_monitor": [
      {
        "name": "resource_check",
        "input": {
          "check_type": "resource",
          "threshold": "high"
        },
        "expected_output": ["memory", "cpu"],
        "timeout": 2
      }
    ]
  },
  "test_scenarios": {
    "user_authentication_feature": {
      "description": "用户认证系统完整开发流程",
      "phases": ["P0", "P1", "P2", "P3", "P4", "P5", "P6"],
      "expected_duration": 120,
      "complexity": "high",
      "agents_needed": 8,
      "files_created": ["auth.py", "test_auth.py", "auth_config.py"],
      "git_commits": 3
    },
    "bug_fix_scenario": {
      "description": "简单Bug修复流程",
      "phases": ["P0", "P1", "P3", "P4", "P5"],
      "expected_duration": 60,
      "complexity": "low",
      "agents_needed": 4,
      "files_modified": ["main.py"],
      "git_commits": 1
    },
    "api_enhancement": {
      "description": "API功能增强",
      "phases": ["P0", "P1", "P2", "P3", "P4", "P5", "P6"],
      "expected_duration": 90,
      "complexity": "medium",
      "agents_needed": 6,
      "files_created": ["api_enhancement.py", "test_api.py"],
      "git_commits": 2
    }
  },
  "performance_thresholds": {
    "hook_execution_time": {
      "fast_hooks": 1.0,
      "standard_hooks": 3.0,
      "slow_hooks": 5.0,
      "timeout_threshold": 10.0
    },
    "phase_transition_time": {
      "P0_to_P1": 2.0,
      "P1_to_P2": 3.0,
      "P2_to_P3": 5.0,
      "P3_to_P4": 10.0,
      "P4_to_P5": 5.0,
      "P5_to_P6": 3.0
    },
    "overall_test_limits": {
      "max_total_duration": 300,
      "max_memory_usage_mb": 500,
      "max_cpu_usage_percent": 80
    }
  },
  "validation_rules": {
    "git_workflow": {
      "require_clean_working_tree": false,
      "require_main_branch_sync": false,
      "allow_test_branches": true,
      "auto_cleanup_test_branches": true
    },
    "hook_execution": {
      "allow_hook_failures": true,
      "require_all_hooks": false,
      "log_hook_outputs": true,
      "validate_hook_performance": true
    },
    "agent_coordination": {
      "validate_parallel_execution": true,
      "check_agent_count_compliance": true,
      "verify_agent_output_format": false,
      "measure_coordination_efficiency": true
    }
  },
  "reporting": {
    "output_formats": ["json", "console"],
    "include_detailed_logs": true,
    "generate_performance_charts": false,
    "save_test_artifacts": true,
    "retention_days": 7
  },
  "error_handling": {
    "max_retries": 3,
    "retry_delay_seconds": 1,
    "fail_fast_mode": false,
    "continue_on_hook_failure": true,
    "cleanup_on_failure": true
  }
}