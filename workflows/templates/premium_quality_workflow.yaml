# Perfect21 è´¨é‡ä¼˜å…ˆå·¥ä½œæµæ¨¡æ¿
name: è´¨é‡ä¼˜å…ˆå®Œæ•´å·¥ä½œæµ
version: 2.0
philosophy: "å®å¯æ…¢ï¼Œä¸å¯é”™ï¼›å®å¯é‡ï¼Œä¸å¯æ¼"
target_quality: production_grade
estimated_time: "æ ¹æ®å¤æ‚åº¦åŠ¨æ€è®¡ç®—"

metadata:
  description: "è´¨é‡ä¼˜å…ˆçš„å®Œæ•´å¼€å‘å·¥ä½œæµï¼Œé€‚ç”¨äºç”Ÿäº§çº§åˆ«çš„åŠŸèƒ½å¼€å‘"
  suitable_for: ["æ–°åŠŸèƒ½å¼€å‘", "é‡è¦æ¨¡å—é‡æ„", "å…³é”®ç³»ç»Ÿç»„ä»¶"]
  required_agents: ["orchestrator", "project-manager", "business-analyst", "technical-writer"]
  optional_agents: ["æ ¹æ®é¡¹ç›®ç±»å‹åŠ¨æ€é€‰æ‹©"]

# ===== Claude Codeåˆ†å±‚æ‰§è¡Œç­–ç•¥ =====
execution_strategy:
  mode: "layered_sequential_with_parallel_groups"
  quality_first: true
  thinking_enhancement: true

stages:
  # ===== ç¬¬1å±‚ï¼šæ·±åº¦ç†è§£é˜¶æ®µ =====
  - name: deep_understanding
    description: "å¤šè§’åº¦æ·±åº¦ç†è§£éœ€æ±‚ï¼Œç¡®ä¿éœ€æ±‚ä¸€è‡´æ€§"
    execution_mode: parallel_then_sync
    thinking_mode: ultrathink

    claude_instruction: |
      ## ç¬¬1å±‚æ‰§è¡Œï¼šæ·±åº¦éœ€æ±‚ç†è§£

      è¯·**å¹¶è¡Œè°ƒç”¨**ä»¥ä¸‹agentsè¿›è¡Œå¤šè§’åº¦éœ€æ±‚åˆ†æï¼š

      Task(
          subagent_type="project-manager",
          description="ä»äº§å“ç®¡ç†è§’åº¦åˆ†æéœ€æ±‚",
          prompt="è¯·ä»äº§å“è§’åº¦æ·±åº¦åˆ†æè¿™ä¸ªéœ€æ±‚ï¼š{task_description}

          åˆ†æè¦ç‚¹ï¼š
          1. ç”¨æˆ·ä»·å€¼å’Œä¸šåŠ¡ä»·å€¼
          2. åŠŸèƒ½èŒƒå›´å’Œè¾¹ç•Œ
          3. ä¼˜å…ˆçº§å’Œä¾èµ–å…³ç³»
          4. æˆåŠŸæ ‡å‡†å’ŒéªŒæ”¶æ¡ä»¶
          5. é£é™©è¯„ä¼°å’Œç¼“è§£ç­–ç•¥

          è¾“å‡ºæ ¼å¼ï¼šäº§å“éœ€æ±‚æ–‡æ¡£(PRD)æ ¼å¼"
      )

      Task(
          subagent_type="business-analyst",
          description="ä»ä¸šåŠ¡åˆ†æè§’åº¦ç†è§£éœ€æ±‚",
          prompt="è¯·ä»ä¸šåŠ¡è§’åº¦æ·±åº¦åˆ†æè¿™ä¸ªéœ€æ±‚ï¼š{task_description}

          åˆ†æè¦ç‚¹ï¼š
          1. ä¸šåŠ¡æµç¨‹å’Œç”¨ä¾‹åˆ†æ
          2. å¹²ç³»äººåˆ†æå’Œå½±å“è¯„ä¼°
          3. ä¸šåŠ¡è§„åˆ™å’Œçº¦æŸæ¡ä»¶
          4. æ•°æ®æµå’Œä¿¡æ¯æ¶æ„
          5. åˆè§„æ€§å’Œæ³•è§„è¦æ±‚

          è¾“å‡ºæ ¼å¼ï¼šä¸šåŠ¡éœ€æ±‚æ–‡æ¡£(BRD)æ ¼å¼"
      )

      Task(
          subagent_type="technical-writer",
          description="ä»æŠ€æœ¯æ–‡æ¡£è§’åº¦ç†è§£éœ€æ±‚",
          prompt="è¯·ä»æ–‡æ¡£å’Œç”¨æˆ·è§’åº¦åˆ†æè¿™ä¸ªéœ€æ±‚ï¼š{task_description}

          åˆ†æè¦ç‚¹ï¼š
          1. ç”¨æˆ·äº¤äº’æµç¨‹å’Œä½“éªŒ
          2. åŠŸèƒ½æè¿°çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§
          3. æŠ€æœ¯æœ¯è¯­å’Œæ¦‚å¿µå®šä¹‰
          4. æ–‡æ¡£ç»“æ„å’Œä¿¡æ¯æ¶æ„
          5. ç”¨æˆ·å¸®åŠ©å’Œé”™è¯¯å¤„ç†

          è¾“å‡ºæ ¼å¼ï¼šç”¨æˆ·éœ€æ±‚æ–‡æ¡£(URD)æ ¼å¼"
      )

    # ğŸ”´ åŒæ­¥ç‚¹1ï¼šéœ€æ±‚å…±è¯†æ£€æŸ¥
    sync_point:
      name: requirements_consensus
      type: cross_validation
      instruction: |
        ## éœ€æ±‚å…±è¯†åŒæ­¥ç‚¹æ£€æŸ¥

        è¯·**ä»”ç»†å¯¹æ¯”**ä¸Šè¿°ä¸‰ä¸ªagentsçš„è¾“å‡ºï¼š

        1. **ä¸€è‡´æ€§æ£€æŸ¥**ï¼š
           - è¯†åˆ«å…±åŒç†è§£çš„éƒ¨åˆ†
           - æ‰¾å‡ºç†è§£åˆ†æ­§çš„åœ°æ–¹
           - åˆ†æåˆ†æ­§çš„æ ¹æœ¬åŸå› 

        2. **åˆ†æ­§è§£å†³**ï¼š
           å¦‚æœå‘ç°åˆ†æ­§ï¼Œè¯·ï¼š
           - è®©ä¸‰ä¸ªagentsäº’ç›¸è¯„å®¡å¯¹æ–¹çš„ç†è§£
           - ç»„ç»‡"è™šæ‹Ÿéœ€æ±‚æ¾„æ¸…ä¼šè®®"
           - è¾¾æˆç»Ÿä¸€çš„éœ€æ±‚ç†è§£

        3. **è¾“å‡ºè¦æ±‚**ï¼š
           ç”Ÿæˆunified_requirements.mdï¼ŒåŒ…å«ï¼š
           - ä¸€è‡´çš„éœ€æ±‚æè¿°
           - æ˜ç¡®çš„åŠŸèƒ½è¾¹ç•Œ
           - ç»Ÿä¸€çš„éªŒæ”¶æ ‡å‡†
           - è¯†åˆ«çš„é£é™©å’Œä¾èµ–

        **è´¨é‡æ ‡å‡†**: ä¸‰ä¸ªagentså¿…é¡»å¯¹æ ¸å¿ƒéœ€æ±‚100%è¾¾æˆä¸€è‡´

      validation_criteria:
        - requirement_consistency: "ä¸‰æ–¹ç†è§£ä¸€è‡´æ€§ > 95%"
        - scope_clarity: "åŠŸèƒ½è¾¹ç•Œæ¸…æ™°æ˜ç¡®"
        - acceptance_criteria: "éªŒæ”¶æ ‡å‡†å¯æ‰§è¡Œ"
        - risk_identification: "ä¸»è¦é£é™©å·²è¯†åˆ«"

    outputs:
      - unified_requirements.md
      - stakeholder_analysis.md
      - risk_assessment.md

    quality_gate:
      checklist: "knowledge/checklists/quality_gates.md#pre-implementation"
      must_pass: true

  # ===== ç¬¬2å±‚ï¼šæ¶æ„è®¾è®¡é˜¶æ®µ =====
  - name: architecture_design
    description: "åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œç¡®ä¿è®¾è®¡ä¸€è‡´æ€§"
    execution_mode: sequential_with_review
    thinking_mode: think_hard
    depends_on: [deep_understanding]

    claude_instruction: |
      ## ç¬¬2å±‚æ‰§è¡Œï¼šåˆ†å±‚æ¶æ„è®¾è®¡

      åŸºäºunified_requirements.mdï¼Œè¯·**æŒ‰é¡ºåº**è°ƒç”¨ä»¥ä¸‹agentsè¿›è¡Œæ¶æ„è®¾è®¡ï¼š

      ### æ­¥éª¤1ï¼šAPIè®¾è®¡ï¼ˆåŸºç¡€ï¼‰
      Task(
          subagent_type="api-designer",
          description="è®¾è®¡APIæ¥å£è§„èŒƒ",
          prompt="åŸºäºéœ€æ±‚æ–‡æ¡£ï¼Œè¯·è®¾è®¡å®Œæ•´çš„APIæ¥å£ï¼š

          è®¾è®¡è¦ç‚¹ï¼š
          1. RESTful APIè®¾è®¡åŸåˆ™
          2. è¯·æ±‚/å“åº”æ•°æ®ç»“æ„
          3. é”™è¯¯ç å’Œå¼‚å¸¸å¤„ç†
          4. è®¤è¯æˆæƒæœºåˆ¶
          5. ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥
          6. é™æµå’Œå®‰å…¨ç­–ç•¥

          è¯·å‚è€ƒï¼šknowledge/patterns/best_practices.md#api-design
          è¾“å‡ºï¼šOpenAPI 3.1è§„èŒƒæ–‡ä»¶"
      )

      **ç­‰å¾…APIè®¾è®¡å®Œæˆåï¼Œå†è¿›è¡Œåç»­è®¾è®¡**

      ### æ­¥éª¤2ï¼šåç«¯æ¶æ„è®¾è®¡ï¼ˆä¾èµ–APIï¼‰
      Task(
          subagent_type="backend-architect",
          description="åŸºäºAPIè®¾è®¡åç«¯æ¶æ„",
          prompt="åŸºäºAPIè§„èŒƒï¼Œè®¾è®¡åç«¯æ¶æ„ï¼š

          è®¾è®¡è¦ç‚¹ï¼š
          1. ç³»ç»Ÿæ¶æ„æ¨¡å¼ï¼ˆåˆ†å±‚ã€å¾®æœåŠ¡ç­‰ï¼‰
          2. æ•°æ®è®¿é—®å±‚è®¾è®¡
          3. ä¸šåŠ¡é€»è¾‘å±‚è®¾è®¡
          4. ç¼“å­˜ç­–ç•¥å’Œæ€§èƒ½ä¼˜åŒ–
          5. å®‰å…¨å®ç°æ–¹æ¡ˆ
          6. ç›‘æ§å’Œæ—¥å¿—ç­–ç•¥

          è¯·å‚è€ƒï¼šknowledge/patterns/best_practices.md#backend-architecture
          è¾“å‡ºï¼šåç«¯æ¶æ„è®¾è®¡æ–‡æ¡£"
      )

      ### æ­¥éª¤3ï¼šæ•°æ®åº“è®¾è®¡ï¼ˆä¾èµ–åç«¯æ¶æ„ï¼‰
      Task(
          subagent_type="database-specialist",
          description="è®¾è®¡æ•°æ®åº“æ¨¡å‹",
          prompt="åŸºäºåç«¯æ¶æ„ï¼Œè®¾è®¡æ•°æ®åº“ï¼š

          è®¾è®¡è¦ç‚¹ï¼š
          1. å®ä½“å…³ç³»æ¨¡å‹(ERD)
          2. æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡
          3. ç´¢å¼•ç­–ç•¥å’Œæ€§èƒ½ä¼˜åŒ–
          4. æ•°æ®è¿ç§»ç­–ç•¥
          5. å¤‡ä»½å’Œæ¢å¤æ–¹æ¡ˆ
          6. æ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤

          è¯·å‚è€ƒï¼šknowledge/patterns/best_practices.md#database-design
          è¾“å‡ºï¼šæ•°æ®åº“è®¾è®¡æ–‡æ¡£å’ŒDDLè„šæœ¬"
      )

      ### æ­¥éª¤4ï¼šå‰ç«¯æ¶æ„è®¾è®¡ï¼ˆä¾èµ–APIï¼‰
      Task(
          subagent_type="frontend-specialist",
          description="è®¾è®¡å‰ç«¯æ¶æ„",
          prompt="åŸºäºAPIè§„èŒƒï¼Œè®¾è®¡å‰ç«¯æ¶æ„ï¼š

          è®¾è®¡è¦ç‚¹ï¼š
          1. ç»„ä»¶æ¶æ„å’ŒçŠ¶æ€ç®¡ç†
          2. è·¯ç”±è®¾è®¡å’Œé¡µé¢ç»“æ„
          3. ç”¨æˆ·ç•Œé¢è®¾è®¡åŸåˆ™
          4. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
          5. é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒ
          6. æ— éšœç¢æ€§å’Œå“åº”å¼è®¾è®¡

          è¯·å‚è€ƒï¼šknowledge/patterns/best_practices.md#frontend-architecture
          è¾“å‡ºï¼šå‰ç«¯æ¶æ„è®¾è®¡æ–‡æ¡£"
      )

    cross_review: true

    # ğŸ”´ åŒæ­¥ç‚¹2ï¼šæ¶æ„è¯„å®¡
    sync_point:
      name: architecture_review
      type: multi_agent_review
      instruction: |
        ## æ¶æ„è®¾è®¡äº¤å‰è¯„å®¡

        ç°åœ¨è¯·å¬é›†**å¤šä¸ªè§’åº¦çš„expert reviewer**å¯¹æ¶æ„è¿›è¡Œè¯„å®¡ï¼š

        Task(
            subagent_type="security-auditor",
            description="ä»å®‰å…¨è§’åº¦è¯„å®¡æ¶æ„",
            prompt="è¯·ä»å®‰å…¨è§†è§’è¯„å®¡æ•´ä¸ªæ¶æ„è®¾è®¡ï¼š

            è¯„å®¡é‡ç‚¹ï¼š
            1. è®¤è¯å’Œæˆæƒæœºåˆ¶çš„å®‰å…¨æ€§
            2. æ•°æ®ä¼ è¾“å’Œå­˜å‚¨çš„å®‰å…¨æ€§
            3. è¾“å…¥éªŒè¯å’ŒSQLæ³¨å…¥é˜²æŠ¤
            4. APIå®‰å…¨æœ€ä½³å®è·µ
            5. æ½œåœ¨çš„å®‰å…¨é£é™©ç‚¹

            è¯·ç»™å‡ºå…·ä½“çš„æ”¹è¿›å»ºè®®å’Œé£é™©ç¼“è§£æ–¹æ¡ˆ"
        )

        Task(
            subagent_type="performance-engineer",
            description="ä»æ€§èƒ½è§’åº¦è¯„å®¡æ¶æ„",
            prompt="è¯·ä»æ€§èƒ½è§†è§’è¯„å®¡æ•´ä¸ªæ¶æ„è®¾è®¡ï¼š

            è¯„å®¡é‡ç‚¹ï¼š
            1. æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½å’Œç´¢å¼•ç­–ç•¥
            2. APIå“åº”æ—¶é—´å’Œååé‡
            3. ç¼“å­˜ç­–ç•¥çš„æœ‰æ•ˆæ€§
            4. å‰ç«¯æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ
            5. ç³»ç»Ÿç“¶é¢ˆå’Œæ‰©å±•æ€§

            è¯·ç»™å‡ºå…·ä½“çš„æ€§èƒ½ä¼˜åŒ–å»ºè®®"
        )

        Task(
            subagent_type="devops-engineer",
            description="ä»è¿ç»´è§’åº¦è¯„å®¡æ¶æ„",
            prompt="è¯·ä»DevOpsè§†è§’è¯„å®¡æ•´ä¸ªæ¶æ„è®¾è®¡ï¼š

            è¯„å®¡é‡ç‚¹ï¼š
            1. éƒ¨ç½²æ¶æ„çš„å¯æ“ä½œæ€§
            2. ç›‘æ§å’Œå‘Šè­¦ç­–ç•¥
            3. æ—¥å¿—æ”¶é›†å’Œåˆ†æ
            4. å®¹ç¾å’Œå¤‡ä»½æ–¹æ¡ˆ
            5. CI/CDé›†æˆä¾¿åˆ©æ€§

            è¯·ç»™å‡ºéƒ¨ç½²å’Œè¿ç»´æ–¹é¢çš„å»ºè®®"
        )

        **è¯„å®¡æµç¨‹**ï¼š
        1. æ¯ä¸ªreviewerç‹¬ç«‹è¿›è¡Œè¯„å®¡
        2. æå‡ºå…·ä½“çš„æ”¹è¿›å»ºè®®
        3. æ¶æ„å¸ˆå“åº”è¯„å®¡æ„è§å¹¶è°ƒæ•´è®¾è®¡
        4. æ‰€æœ‰reviewerç¡®è®¤ä¿®æ”¹åçš„æ¶æ„

        **è´¨é‡æ ‡å‡†**: æ‰€æœ‰reviewerså¿…é¡»approveæ¶æ„è®¾è®¡

      validation_criteria:
        - security_approval: "å®‰å…¨è¯„å®¡é€šè¿‡ï¼Œæ— é«˜é£é™©é¡¹"
        - performance_approval: "æ€§èƒ½è¯„å®¡é€šè¿‡ï¼Œæ»¡è¶³ç›®æ ‡æŒ‡æ ‡"
        - devops_approval: "è¿ç»´è¯„å®¡é€šè¿‡ï¼Œå¯éƒ¨ç½²å¯ç»´æŠ¤"
        - design_consistency: "APIã€åç«¯ã€æ•°æ®åº“ã€å‰ç«¯æ¶æ„ä¸€è‡´"

    outputs:
      - api_specification.yaml
      - backend_architecture.md
      - database_design.md
      - frontend_architecture.md
      - architecture_review_report.md

    quality_gate:
      checklist: "knowledge/checklists/quality_gates.md#architecture-design"
      must_pass: true

  # ===== ç¬¬3å±‚ï¼šå¹¶è¡Œå®ç°é˜¶æ®µ =====
  - name: parallel_implementation
    description: "æŒ‰é¢†åŸŸå¹¶è¡Œå®ç°ï¼Œç¡®ä¿ä»£ç è´¨é‡"
    execution_mode: domain_parallel
    thinking_mode: think_with_examples
    depends_on: [architecture_design]

    claude_instruction: |
      ## ç¬¬3å±‚æ‰§è¡Œï¼šé¢†åŸŸå¹¶è¡Œå®ç°

      åŸºäºæ¶æ„è®¾è®¡æ–‡æ¡£ï¼Œç°åœ¨å¯ä»¥**å¹¶è¡Œå®ç°**ä¸åŒé¢†åŸŸçš„ä»£ç ï¼š

      ### åç«¯å®ç°åŸŸ
      Task(
          subagent_type="backend-architect",
          description="å®ç°åç«¯APIå’Œä¸šåŠ¡é€»è¾‘",
          prompt="åŸºäºæ¶æ„è®¾è®¡ï¼Œå®ç°å®Œæ•´çš„åç«¯ç³»ç»Ÿï¼š

          å®ç°è¦ç‚¹ï¼š
          1. æŒ‰ç…§OpenAPIè§„èŒƒå®ç°æ‰€æœ‰APIç«¯ç‚¹
          2. å®ç°ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®å±‚
          3. é›†æˆè®¤è¯æˆæƒæœºåˆ¶
          4. å®ç°ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–
          5. æ·»åŠ æ—¥å¿—å’Œç›‘æ§ç‚¹
          6. é”™è¯¯å¤„ç†å’Œå¼‚å¸¸ç®¡ç†

          ä»£ç è´¨é‡è¦æ±‚ï¼š
          - éµå¾ªSOLIDåŸåˆ™
          - å•ä¸€èŒè´£ï¼Œä½è€¦åˆé«˜å†…èš
          - å®Œæ•´çš„é”™è¯¯å¤„ç†
          - å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£

          è¯·å‚è€ƒï¼šknowledge/patterns/best_practices.md
          åŒæ—¶è¿›è¡Œå•å…ƒæµ‹è¯•å¼€å‘"
      )

      ### å‰ç«¯å®ç°åŸŸ
      Task(
          subagent_type="frontend-specialist",
          description="å®ç°å‰ç«¯ç•Œé¢å’Œäº¤äº’",
          prompt="åŸºäºæ¶æ„è®¾è®¡å’ŒAPIè§„èŒƒï¼Œå®ç°å‰ç«¯åº”ç”¨ï¼š

          å®ç°è¦ç‚¹ï¼š
          1. å®ç°æ‰€æœ‰ç”¨æˆ·ç•Œé¢ç»„ä»¶
          2. é›†æˆAPIè°ƒç”¨å’ŒçŠ¶æ€ç®¡ç†
          3. å®ç°è·¯ç”±å’Œé¡µé¢å¯¼èˆª
          4. é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ
          5. å“åº”å¼è®¾è®¡å’Œæ— éšœç¢æ”¯æŒ
          6. æ€§èƒ½ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒ

          ä»£ç è´¨é‡è¦æ±‚ï¼š
          - ç»„ä»¶åŒ–å’Œå¯å¤ç”¨æ€§
          - TypeScriptç±»å‹å®‰å…¨
          - é”™è¯¯è¾¹ç•Œå’Œå¼‚å¸¸å¤„ç†
          - ç”¨æˆ·å‹å¥½çš„äº¤äº’è®¾è®¡

          è¯·å‚è€ƒï¼šknowledge/patterns/best_practices.md
          åŒæ—¶å¼€å‘ç»„ä»¶æµ‹è¯•"
      )

      ### æ•°æ®å±‚å®ç°åŸŸ
      Task(
          subagent_type="database-specialist",
          description="å®ç°æ•°æ®åº“å’Œæ•°æ®è®¿é—®å±‚",
          prompt="åŸºäºæ•°æ®åº“è®¾è®¡ï¼Œå®ç°æ•°æ®å­˜å‚¨å±‚ï¼š

          å®ç°è¦ç‚¹ï¼š
          1. åˆ›å»ºæ•°æ®åº“è¡¨å’Œç´¢å¼•
          2. å®ç°æ•°æ®è¿ç§»è„šæœ¬
          3. æ•°æ®è®¿é—®å±‚å’ŒORMé…ç½®
          4. æŸ¥è¯¢ä¼˜åŒ–å’Œæ€§èƒ½è°ƒä¼˜
          5. æ•°æ®å¤‡ä»½å’Œæ¢å¤è„šæœ¬
          6. æ•°æ®å®‰å…¨å’Œè®¿é—®æ§åˆ¶

          ä»£ç è´¨é‡è¦æ±‚ï¼š
          - è§„èŒƒçš„SQLå’Œç´¢å¼•è®¾è®¡
          - äº‹åŠ¡è¾¹ç•Œæ§åˆ¶
          - æ•°æ®ä¸€è‡´æ€§ä¿è¯
          - è¿ç§»è„šæœ¬å¯å›æ»š

          è¾“å‡ºï¼šæ•°æ®åº“è„šæœ¬å’Œæ•°æ®è®¿é—®å±‚ä»£ç "
      )

      ### æµ‹è¯•å®ç°åŸŸ
      Task(
          subagent_type="test-engineer",
          description="å®ç°å…¨é¢çš„æµ‹è¯•å¥—ä»¶",
          prompt="ä¸ºæ•´ä¸ªç³»ç»Ÿå®ç°å®Œæ•´çš„æµ‹è¯•ï¼š

          æµ‹è¯•ç­–ç•¥ï¼š
          1. å•å…ƒæµ‹è¯•ï¼šè¦†ç›–ç‡>90%
          2. é›†æˆæµ‹è¯•ï¼šAPIå’Œæ•°æ®åº“é›†æˆ
          3. ç«¯åˆ°ç«¯æµ‹è¯•ï¼šå…³é”®ç”¨æˆ·æµç¨‹
          4. æ€§èƒ½æµ‹è¯•ï¼šå“åº”æ—¶é—´å’Œè´Ÿè½½
          5. å®‰å…¨æµ‹è¯•ï¼šå¸¸è§æ”»å‡»å‘é‡
          6. å…¼å®¹æ€§æµ‹è¯•ï¼šæµè§ˆå™¨å’Œè®¾å¤‡

          æµ‹è¯•è´¨é‡è¦æ±‚ï¼š
          - æµ‹è¯•ç‹¬ç«‹æ€§å’Œå¯é‡å¤æ€§
          - æµ‹è¯•æ•°æ®å·¥å‚æ¨¡å¼
          - æ¸…æ™°çš„æ–­è¨€å’Œé”™è¯¯ä¿¡æ¯
          - CI/CDé›†æˆå‹å¥½

          è¯·å‚è€ƒï¼šknowledge/patterns/best_practices.md#testing
          è¾“å‡ºï¼šå®Œæ•´çš„æµ‹è¯•å¥—ä»¶"
      )

    # å®ç°è¿‡ç¨‹ä¸­çš„è´¨é‡æ£€æŸ¥
    continuous_quality_checks:
      - trigger: "every_100_lines"
        action: "è¿è¡Œlintå’Œæ ¼å¼æ£€æŸ¥"
      - trigger: "every_function"
        action: "å•å…ƒæµ‹è¯•è¦†ç›–"
      - trigger: "every_api_endpoint"
        action: "APIé›†æˆæµ‹è¯•"
      - trigger: "every_commit"
        action: "å®‰å…¨æ‰«ææ£€æŸ¥"

    # ğŸ”´ åŒæ­¥ç‚¹3ï¼šé›†æˆå‡†å¤‡æ£€æŸ¥
    sync_point:
      name: integration_readiness
      type: comprehensive_check
      instruction: |
        ## é›†æˆå‡†å¤‡åº¦æ£€æŸ¥

        ç°åœ¨æ‰€æœ‰é¢†åŸŸçš„å®ç°éƒ½å®Œæˆäº†ï¼Œè¯·è¿›è¡Œé›†æˆå‰çš„å…¨é¢æ£€æŸ¥ï¼š

        ### 1. æ¥å£ä¸€è‡´æ€§æ£€æŸ¥
        - å‰åç«¯APIè°ƒç”¨æ˜¯å¦ä¸OpenAPIè§„èŒƒå®Œå…¨ä¸€è‡´
        - æ•°æ®ç»“æ„å’Œå­—æ®µç±»å‹æ˜¯å¦åŒ¹é…
        - é”™è¯¯ç å’Œå¼‚å¸¸å¤„ç†æ˜¯å¦ç»Ÿä¸€

        ### 2. åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥
        - æ‰€æœ‰éœ€æ±‚çš„åŠŸèƒ½ç‚¹æ˜¯å¦éƒ½å·²å®ç°
        - ç”¨æˆ·æ•…äº‹çš„éªŒæ”¶æ ‡å‡†æ˜¯å¦éƒ½èƒ½æ»¡è¶³
        - è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µå¤„ç†æ˜¯å¦å®Œæ•´

        ### 3. ä»£ç è´¨é‡æ£€æŸ¥
        - è¿è¡Œå®Œæ•´çš„ä»£ç è´¨é‡æ‰«æ
        - æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡
        - ç¡®è®¤æ‰€æœ‰agentséƒ½éµå¾ªäº†ä»£ç è§„èŒƒ

        ### 4. å®‰å…¨æ€§æ£€æŸ¥
        - è¿è¡ŒSASTé™æ€å®‰å…¨æ‰«æ
        - æ£€æŸ¥ä¾èµ–åŒ…å®‰å…¨æ¼æ´
        - éªŒè¯è®¤è¯æˆæƒå®ç°æ­£ç¡®æ€§

        **é›†æˆæ ‡å‡†**ï¼šæ‰€æœ‰æ£€æŸ¥é¡¹å¿…é¡»é€šè¿‡æ‰èƒ½è¿›å…¥ä¸‹ä¸€é˜¶æ®µ

      validation_criteria:
        - api_consistency: "å‰åç«¯æ¥å£100%ä¸€è‡´"
        - feature_completeness: "åŠŸèƒ½å®Œæ•´æ€§100%"
        - code_quality: "ä»£ç è´¨é‡åˆ†æ•°>90"
        - test_coverage: "æµ‹è¯•è¦†ç›–ç‡>90%"
        - security_scan: "æ— é«˜å±å®‰å…¨æ¼æ´"
        - performance_baseline: "æ€§èƒ½åŸºå‡†æµ‹è¯•é€šè¿‡"

    outputs:
      - backend_implementation/
      - frontend_implementation/
      - database_scripts/
      - test_suites/
      - integration_report.md

    quality_gate:
      checklist: "knowledge/checklists/quality_gates.md#post-implementation"
      must_pass: true

  # ===== ç¬¬4å±‚ï¼šå…¨é¢æµ‹è¯•é˜¶æ®µ =====
  - name: comprehensive_testing
    description: "å¤šç»´åº¦å…¨é¢æµ‹è¯•ï¼Œç¡®ä¿äº§å“è´¨é‡"
    execution_mode: parallel_test_suites
    thinking_mode: adversarial_thinking
    depends_on: [parallel_implementation]

    claude_instruction: |
      ## ç¬¬4å±‚æ‰§è¡Œï¼šå…¨é¢å¹¶è¡Œæµ‹è¯•

      ç°åœ¨è¿›è¡Œç”Ÿäº§çº§åˆ«çš„å…¨é¢æµ‹è¯•ï¼Œè¯·**å¹¶è¡Œè°ƒç”¨**æ‰€æœ‰æµ‹è¯•specialistsï¼š

      Task(
          subagent_type="test-engineer",
          description="æ‰§è¡ŒåŠŸèƒ½å’Œå›å½’æµ‹è¯•",
          prompt="æ‰§è¡Œå…¨é¢çš„åŠŸèƒ½æµ‹è¯•å¥—ä»¶ï¼š

          æµ‹è¯•èŒƒå›´ï¼š
          1. å•å…ƒæµ‹è¯•æ‰§è¡Œå’Œåˆ†æ
          2. é›†æˆæµ‹è¯•å…¨é¢éªŒè¯
          3. APIæµ‹è¯•å’Œå¥‘çº¦æµ‹è¯•
          4. å›å½’æµ‹è¯•ç¡®ä¿æ— ç ´å
          5. è¾¹ç•Œæµ‹è¯•å’Œå¼‚å¸¸æµ‹è¯•
          6. æ•°æ®ä¸€è‡´æ€§æµ‹è¯•

          æµ‹è¯•æŠ¥å‘Šè¦æ±‚ï¼š
          - æµ‹è¯•è¦†ç›–ç‡è¯¦ç»†æŠ¥å‘Š
          - å¤±è´¥æµ‹è¯•çš„æ ¹å› åˆ†æ
          - æµ‹è¯•æ‰§è¡Œæ—¶é—´åˆ†æ
          - è´¨é‡è¶‹åŠ¿å¯¹æ¯”åˆ†æ

          è¾“å‡ºï¼šåŠŸèƒ½æµ‹è¯•å®Œæ•´æŠ¥å‘Š"
      )

      Task(
          subagent_type="e2e-test-specialist",
          description="æ‰§è¡Œç«¯åˆ°ç«¯ä¸šåŠ¡æµç¨‹æµ‹è¯•",
          prompt="æ‰§è¡Œå…³é”®ä¸šåŠ¡æµç¨‹çš„E2Eæµ‹è¯•ï¼š

          æµ‹è¯•åœºæ™¯ï¼š
          1. å®Œæ•´ç”¨æˆ·æ³¨å†Œå’Œç™»å½•æµç¨‹
          2. æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½ç«¯åˆ°ç«¯éªŒè¯
          3. é”™è¯¯å¤„ç†å’Œæ¢å¤æµç¨‹
          4. å¤šç”¨æˆ·å¹¶å‘åœºæ™¯æµ‹è¯•
          5. è·¨æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•
          6. ç§»åŠ¨ç«¯å“åº”å¼æµ‹è¯•

          è‡ªåŠ¨åŒ–è¦æ±‚ï¼š
          - ä½¿ç”¨Playwrightæˆ–ç±»ä¼¼å·¥å…·
          - æµ‹è¯•æ•°æ®è‡ªåŠ¨åŒ–ç®¡ç†
          - æˆªå›¾å’Œè§†é¢‘è®°å½•
          - CI/CDé›†æˆå°±ç»ª

          è¾“å‡ºï¼šE2Eæµ‹è¯•æŠ¥å‘Šå’Œè‡ªåŠ¨åŒ–è„šæœ¬"
      )

      Task(
          subagent_type="performance-tester",
          description="æ‰§è¡Œæ€§èƒ½å’Œè´Ÿè½½æµ‹è¯•",
          prompt="æ‰§è¡Œå…¨é¢çš„æ€§èƒ½æµ‹è¯•ï¼š

          æ€§èƒ½æµ‹è¯•ç±»å‹ï¼š
          1. åŸºå‡†æ€§èƒ½æµ‹è¯•ï¼šAPIå“åº”æ—¶é—´
          2. è´Ÿè½½æµ‹è¯•ï¼šæ­£å¸¸ç”¨æˆ·è´Ÿè½½ä¸‹è¡¨ç°
          3. å‹åŠ›æµ‹è¯•ï¼šç³»ç»Ÿæé™æ‰¿è½½èƒ½åŠ›
          4. å®¹é‡æµ‹è¯•ï¼šèµ„æºä½¿ç”¨æƒ…å†µåˆ†æ
          5. ç¨³å®šæ€§æµ‹è¯•ï¼šé•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§
          6. ç“¶é¢ˆåˆ†æï¼šæ€§èƒ½ç“¶é¢ˆè¯†åˆ«

          æ€§èƒ½æŒ‡æ ‡è¦æ±‚ï¼š
          - APIå“åº”æ—¶é—´ P95 < 200ms
          - ç³»ç»Ÿååé‡æ»¡è¶³éœ€æ±‚
          - èµ„æºä½¿ç”¨ç‡åˆç†
          - æ— å†…å­˜æ³„éœ²

          è¾“å‡ºï¼šæ€§èƒ½æµ‹è¯•æŠ¥å‘Šå’Œä¼˜åŒ–å»ºè®®"
      )

      Task(
          subagent_type="security-auditor",
          description="æ‰§è¡Œå®‰å…¨æµ‹è¯•å’Œå®¡è®¡",
          prompt="æ‰§è¡Œå…¨é¢çš„å®‰å…¨æµ‹è¯•ï¼š

          å®‰å…¨æµ‹è¯•èŒƒå›´ï¼š
          1. OWASP Top 10å®‰å…¨æ¼æ´æ‰«æ
          2. è®¤è¯å’Œæˆæƒæœºåˆ¶æµ‹è¯•
          3. SQLæ³¨å…¥å’ŒXSSæ”»å‡»æµ‹è¯•
          4. CSRFå’Œä¼šè¯åŠ«æŒæµ‹è¯•
          5. æ•æ„Ÿæ•°æ®æ³„éœ²æ£€æŸ¥
          6. APIå®‰å…¨æ€§éªŒè¯

          å®‰å…¨æµ‹è¯•å·¥å…·ï¼š
          - é™æ€ä»£ç å®‰å…¨æ‰«æ(SAST)
          - åŠ¨æ€åº”ç”¨å®‰å…¨æµ‹è¯•(DAST)
          - ä¾èµ–ç»„ä»¶å®‰å…¨æ‰«æ
          - æ¸—é€æµ‹è¯•æ¨¡æ‹Ÿ

          è¾“å‡ºï¼šå®‰å…¨å®¡è®¡æŠ¥å‘Šå’Œä¿®å¤å»ºè®®"
      )

      Task(
          subagent_type="accessibility-auditor",
          description="æ‰§è¡Œæ— éšœç¢æ€§å’Œå¯ç”¨æ€§æµ‹è¯•",
          prompt="æ‰§è¡Œæ— éšœç¢æ€§å’Œç”¨æˆ·ä½“éªŒæµ‹è¯•ï¼š

          æµ‹è¯•æ ‡å‡†ï¼š
          1. WCAG 2.1 AAçº§åˆ«åˆè§„æ€§
          2. å±å¹•é˜…è¯»å™¨å…¼å®¹æ€§
          3. é”®ç›˜å¯¼èˆªå’Œæ“ä½œ
          4. è‰²å½©å¯¹æ¯”åº¦å’Œè§†è§‰è®¾è®¡
          5. ç§»åŠ¨è®¾å¤‡å¯ç”¨æ€§
          6. å¤šè¯­è¨€å’Œå›½é™…åŒ–æ”¯æŒ

          å¯ç”¨æ€§æµ‹è¯•ï¼š
          - ç”¨æˆ·ä»»åŠ¡å®Œæˆç‡
          - ä»»åŠ¡å®Œæˆæ—¶é—´
          - ç”¨æˆ·é”™è¯¯ç‡
          - ç”¨æˆ·æ»¡æ„åº¦è¯„ä¼°

          è¾“å‡ºï¼šæ— éšœç¢æ€§å’Œå¯ç”¨æ€§æµ‹è¯•æŠ¥å‘Š"
      )

    # ğŸ”´ åŒæ­¥ç‚¹4ï¼šç»¼åˆè´¨é‡é—¨
    sync_point:
      name: comprehensive_quality_gate
      type: multi_dimensional_validation
      instruction: |
        ## ç»¼åˆè´¨é‡é—¨éªŒè¯

        ç°åœ¨éœ€è¦å¯¹æ‰€æœ‰æµ‹è¯•ç»“æœè¿›è¡Œç»¼åˆè¯„ä¼°ï¼š

        ### 1. åŠŸèƒ½è´¨é‡è¯„ä¼°
        - åŠŸèƒ½æµ‹è¯•é€šè¿‡ç‡å¿…é¡»100%
        - E2Eæµ‹è¯•æ ¸å¿ƒæµç¨‹å¿…é¡»100%é€šè¿‡
        - å›å½’æµ‹è¯•æ— æ–°å¢é—®é¢˜

        ### 2. æ€§èƒ½è´¨é‡è¯„ä¼°
        - APIå“åº”æ—¶é—´P95 < 200ms âœ…
        - ç³»ç»Ÿååé‡æ»¡è¶³é¢„æœŸè´Ÿè½½ âœ…
        - èµ„æºä½¿ç”¨ç‡åˆç†ä¸”å¯æ‰©å±• âœ…
        - æ— æ€§èƒ½å›å½’é—®é¢˜ âœ…

        ### 3. å®‰å…¨è´¨é‡è¯„ä¼°
        - æ— é«˜å±å®‰å…¨æ¼æ´ âœ…
        - è®¤è¯æˆæƒæœºåˆ¶æ­£ç¡® âœ…
        - å¸¸è§æ”»å‡»å‘é‡é˜²æŠ¤æœ‰æ•ˆ âœ…
        - æ•æ„Ÿæ•°æ®å¤„ç†åˆè§„ âœ…

        ### 4. ç”¨æˆ·ä½“éªŒè´¨é‡è¯„ä¼°
        - WCAG 2.1 AAçº§åˆ«åˆè§„ âœ…
        - è·¨æµè§ˆå™¨å…¼å®¹æ€§è‰¯å¥½ âœ…
        - ç§»åŠ¨ç«¯ä½“éªŒä¼˜ç§€ âœ…
        - é”™è¯¯å¤„ç†ç”¨æˆ·å‹å¥½ âœ…

        ### 5. ä»£ç è´¨é‡è¯„ä¼°
        - ä»£ç è¦†ç›–ç‡ > 90% âœ…
        - ä»£ç è´¨é‡åˆ†æ•° > 90 âœ…
        - æŠ€æœ¯å€ºåŠ¡åˆç† âœ…
        - æ–‡æ¡£å®Œæ•´å‡†ç¡® âœ…

        **æ”¾è¡Œæ ‡å‡†**: æ‰€æœ‰ç»´åº¦è¯„ä¼°éƒ½å¿…é¡»è¾¾åˆ°ä¼˜ç§€æ°´å¹³

      validation_criteria:
        - functional_quality: "åŠŸèƒ½æµ‹è¯•100%é€šè¿‡"
        - performance_quality: "æ€§èƒ½æŒ‡æ ‡100%è¾¾æ ‡"
        - security_quality: "å®‰å…¨æ‰«ææ— é«˜å±æ¼æ´"
        - ux_quality: "ç”¨æˆ·ä½“éªŒè¯„ä¼°ä¼˜ç§€"
        - code_quality: "ä»£ç è´¨é‡æŒ‡æ ‡ä¼˜ç§€"
        - overall_readiness: "ç”Ÿäº§å°±ç»ªåº¦è¯„ä¼°é€šè¿‡"

    outputs:
      - functional_test_report.md
      - e2e_test_report.md
      - performance_test_report.md
      - security_audit_report.md
      - accessibility_test_report.md
      - comprehensive_quality_report.md

    quality_gate:
      checklist: "knowledge/checklists/quality_gates.md#comprehensive-testing"
      must_pass: true

  # ===== ç¬¬5å±‚ï¼šéƒ¨ç½²å‡†å¤‡é˜¶æ®µ =====
  - name: deployment_preparation
    description: "ç”Ÿäº§éƒ¨ç½²å‡†å¤‡ï¼Œç¡®ä¿è¿ç»´å°±ç»ª"
    execution_mode: deployment_pipeline
    thinking_mode: think_production_ready
    depends_on: [comprehensive_testing]

    claude_instruction: |
      ## ç¬¬5å±‚æ‰§è¡Œï¼šç”Ÿäº§éƒ¨ç½²å‡†å¤‡

      ç°åœ¨å‡†å¤‡ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼Œè¯·è°ƒç”¨è¿ç»´ç›¸å…³çš„agentsï¼š

      Task(
          subagent_type="devops-engineer",
          description="å®¹å™¨åŒ–å’Œç¼–æ’é…ç½®",
          prompt="å‡†å¤‡ç”Ÿäº§çº§åˆ«çš„å®¹å™¨åŒ–éƒ¨ç½²ï¼š

          å®¹å™¨åŒ–è¦æ±‚ï¼š
          1. å¤šé˜¶æ®µDockeræ„å»ºä¼˜åŒ–
          2. érootç”¨æˆ·å®‰å…¨è¿è¡Œ
          3. å¥åº·æ£€æŸ¥å’Œä¼˜é›…å…³é—­
          4. ç¯å¢ƒå˜é‡å’Œé…ç½®ç®¡ç†
          5. æ—¥å¿—æ”¶é›†å’Œèšåˆé…ç½®
          6. ç›‘æ§æŒ‡æ ‡æš´éœ²

          ç¼–æ’é…ç½®ï¼š
          - Kuberneteséƒ¨ç½²æ¸…å•
          - æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡
          - å­˜å‚¨å’Œç½‘ç»œé…ç½®
          - èµ„æºé™åˆ¶å’ŒHPAé…ç½®

          è¾“å‡ºï¼šå®Œæ•´çš„éƒ¨ç½²é…ç½®æ–‡ä»¶"
      )

      Task(
          subagent_type="deployment-manager",
          description="éƒ¨ç½²ç­–ç•¥å’Œå‘å¸ƒè®¡åˆ’",
          prompt="åˆ¶å®šç”Ÿäº§éƒ¨ç½²ç­–ç•¥ï¼š

          éƒ¨ç½²ç­–ç•¥ï¼š
          1. è“ç»¿éƒ¨ç½²æˆ–æ»šåŠ¨æ›´æ–°ç­–ç•¥
          2. æ•°æ®åº“è¿ç§»å’Œå›æ»šæ–¹æ¡ˆ
          3. é…ç½®æ›´æ–°å’Œç¯å¢ƒå‡†å¤‡
          4. æœåŠ¡ä¾èµ–å’Œå¯åŠ¨é¡ºåº
          5. å¥åº·æ£€æŸ¥å’ŒéªŒè¯æµç¨‹
          6. å‘å¸ƒæ—¶é—´çª—å£å’Œé€šçŸ¥è®¡åˆ’

          åº”æ€¥é¢„æ¡ˆï¼š
          - å¿«é€Ÿå›æ»šç¨‹åº
          - æ•…éšœéš”ç¦»å’Œæ¢å¤
          - äº‹æ•…å“åº”æµç¨‹
          - è”ç³»äººå’Œå‡çº§è·¯å¾„

          è¾“å‡ºï¼šéƒ¨ç½²æ‰‹å†Œå’Œåº”æ€¥é¢„æ¡ˆ"
      )

      Task(
          subagent_type="monitoring-specialist",
          description="ç›‘æ§å’Œå‘Šè­¦é…ç½®",
          prompt="é…ç½®ç”Ÿäº§ç¯å¢ƒç›‘æ§ï¼š

          ç›‘æ§é…ç½®ï¼š
          1. åº”ç”¨æ€§èƒ½æŒ‡æ ‡(APM)
          2. åŸºç¡€è®¾æ–½ç›‘æ§æŒ‡æ ‡
          3. ä¸šåŠ¡æŒ‡æ ‡å’ŒKPIç›‘æ§
          4. æ—¥å¿—èšåˆå’Œåˆ†æ
          5. åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª
          6. é”™è¯¯ç‡å’Œå¯ç”¨æ€§ç›‘æ§

          å‘Šè­¦é…ç½®ï¼š
          - å…³é”®æŒ‡æ ‡é˜ˆå€¼è®¾ç½®
          - å‘Šè­¦çº§åˆ«å’Œé€šçŸ¥è§„åˆ™
          - å€¼ç­è½®æ¢å’Œå‡çº§æœºåˆ¶
          - å‘Šè­¦ç–²åŠ³é˜²æŠ¤

          è¾“å‡ºï¼šç›‘æ§å’Œå‘Šè­¦é…ç½®æ–‡ä»¶"
      )

    # ğŸ”´ åŒæ­¥ç‚¹5ï¼šç”Ÿäº§å°±ç»ªéªŒè¯
    sync_point:
      name: production_readiness
      type: final_validation
      instruction: |
        ## ç”Ÿäº§å°±ç»ªæœ€ç»ˆéªŒè¯

        è¿™æ˜¯å‘å¸ƒå‰çš„æœ€åæ£€æŸ¥ï¼Œè¯·ç¡®ä¿æ‰€æœ‰ç”Ÿäº§è¦ç´ éƒ½å·²å°±ç»ªï¼š

        ### 1. éƒ¨ç½²ç¯å¢ƒéªŒè¯
        - å®¹å™¨é•œåƒæ„å»ºå’Œå®‰å…¨æ‰«æé€šè¿‡
        - Kubernetesé›†ç¾¤èµ„æºå……è¶³
        - ç½‘ç»œå’Œå­˜å‚¨é…ç½®æ­£ç¡®
        - ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶å‡†å¤‡å®Œæ¯•

        ### 2. æ•°æ®å±‚éªŒè¯
        - æ•°æ®åº“è¿ç§»è„šæœ¬æµ‹è¯•é€šè¿‡
        - æ•°æ®å¤‡ä»½å’Œæ¢å¤æµç¨‹éªŒè¯
        - è¿æ¥æ± å’Œæ€§èƒ½å‚æ•°è°ƒä¼˜
        - æ•°æ®è®¿é—®æƒé™é…ç½®æ­£ç¡®

        ### 3. ç›‘æ§è¿ç»´éªŒè¯
        - ç›‘æ§æŒ‡æ ‡æ”¶é›†æ­£å¸¸
        - å‘Šè­¦è§„åˆ™æµ‹è¯•æœ‰æ•ˆ
        - æ—¥å¿—æ”¶é›†å’Œæ£€ç´¢æ­£å¸¸
        - è¿ç»´æ–‡æ¡£å’Œæµç¨‹å®Œå¤‡

        ### 4. å®‰å…¨åˆè§„éªŒè¯
        - ç”Ÿäº§ç¯å¢ƒå®‰å…¨åŠ å›º
        - SSLè¯ä¹¦å’ŒåŠ å¯†é…ç½®
        - ç½‘ç»œå®‰å…¨å’Œé˜²ç«å¢™è§„åˆ™
        - å®¡è®¡æ—¥å¿—å’Œåˆè§„æ£€æŸ¥

        ### 5. ä¸šåŠ¡è¿ç»­æ€§éªŒè¯
        - æœåŠ¡ä¾èµ–å…³ç³»æ¢³ç†
        - æ•…éšœåˆ‡æ¢å’Œæ¢å¤æµ‹è¯•
        - å®¹é‡è§„åˆ’å’Œæ‰©å®¹é¢„æ¡ˆ
        - ä¸šåŠ¡å½±å“è¯„ä¼°å’Œæ²Ÿé€šè®¡åˆ’

        **æœ€ç»ˆç¡®è®¤**: æ‰€æœ‰éªŒè¯é¡¹ç›®éƒ½é€šè¿‡ï¼Œç³»ç»Ÿå·²ä¸ºç”Ÿäº§å‘å¸ƒåšå¥½å‡†å¤‡

      validation_criteria:
        - deployment_ready: "éƒ¨ç½²é…ç½®æµ‹è¯•é€šè¿‡"
        - monitoring_ready: "ç›‘æ§å‘Šè­¦é…ç½®ç”Ÿæ•ˆ"
        - security_hardened: "ç”Ÿäº§ç¯å¢ƒå®‰å…¨åŠ å›ºå®Œæˆ"
        - backup_verified: "å¤‡ä»½æ¢å¤æµç¨‹éªŒè¯é€šè¿‡"
        - documentation_complete: "è¿ç»´æ–‡æ¡£å®Œæ•´å‡†ç¡®"
        - team_prepared: "è¿ç»´å›¢é˜Ÿå’Œæµç¨‹å°±ç»ª"

    outputs:
      - deployment_configs/
      - monitoring_configs/
      - deployment_handbook.md
      - emergency_response_plan.md
      - production_readiness_report.md

    quality_gate:
      checklist: "knowledge/checklists/quality_gates.md#pre-release"
      must_pass: true

# ===== Hookæœºåˆ¶é…ç½® =====
hooks:
  pre_execution:
    - name: context_validation
      description: "éªŒè¯æ‰§è¡Œä¸Šä¸‹æ–‡"
      action: "æ£€æŸ¥ä¾èµ–æ–‡ä»¶å­˜åœ¨æ€§å’Œæƒé™"

    - name: agent_availability
      description: "æ£€æŸ¥agentå¯ç”¨æ€§"
      action: "ç¡®è®¤æ‰€éœ€agentséƒ½å¯è°ƒç”¨"

    - name: quality_baseline
      description: "å»ºç«‹è´¨é‡åŸºçº¿"
      action: "è®°å½•åˆå§‹è´¨é‡æŒ‡æ ‡"

  post_execution:
    - name: output_validation
      description: "éªŒè¯è¾“å‡ºè´¨é‡"
      action: "æ£€æŸ¥è¾“å‡ºæ ¼å¼å’Œå®Œæ•´æ€§"

    - name: artifact_collection
      description: "æ”¶é›†æ‰§è¡Œäº§ç‰©"
      action: "æ•´ç†å’Œå½’æ¡£æ‰€æœ‰è¾“å‡ºæ–‡ä»¶"

    - name: quality_measurement
      description: "è´¨é‡åº¦é‡"
      action: "æµ‹é‡å’Œè®°å½•è´¨é‡æŒ‡æ ‡"

    - name: knowledge_update
      description: "çŸ¥è¯†åº“æ›´æ–°"
      action: "å°†ç»éªŒæ•™è®­å†™å…¥çŸ¥è¯†åº“"

  on_error:
    - name: error_analysis
      description: "é”™è¯¯æ ¹å› åˆ†æ"
      action: "åˆ†æå¤±è´¥åŸå› å¹¶è®°å½•"

    - name: rollback_preparation
      description: "å›æ»šå‡†å¤‡"
      action: "å‡†å¤‡å›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šçŠ¶æ€"

    - name: team_notification
      description: "å›¢é˜Ÿé€šçŸ¥"
      action: "é€šçŸ¥ç›¸å…³äººå‘˜å¤„ç†å¼‚å¸¸"

  on_quality_gate_failure:
    - name: failure_analysis
      description: "è´¨é‡é—¨å¤±è´¥åˆ†æ"
      action: "è¯¦ç»†åˆ†æå¤±è´¥åŸå› å’Œå½±å“"

    - name: improvement_plan
      description: "æ”¹è¿›è®¡åˆ’"
      action: "åˆ¶å®šè´¨é‡æ”¹è¿›è®¡åˆ’"

    - name: process_optimization
      description: "æµç¨‹ä¼˜åŒ–"
      action: "è€ƒè™‘æµç¨‹æ”¹è¿›æœºä¼š"

# ===== æ€è€ƒå¢å¼ºé…ç½® =====
thinking_enhancement:
  critical_decisions:
    trigger_conditions:
      - "æ¶æ„é€‰æ‹©"
      - "å®‰å…¨æœºåˆ¶è®¾è®¡"
      - "æ€§èƒ½ç“¶é¢ˆè§£å†³"
      - "æŠ€æœ¯å€ºåŠ¡å¤„ç†"
    strategy: "multi_agent_debate"
    instruction: "å¬é›†ç›¸å…³expertsè¿›è¡Œæ–¹æ¡ˆè¾©è®ºï¼Œå¿…é¡»è¾¾æˆå…±è¯†"

  complex_problems:
    trigger_conditions:
      - "è·¨ç³»ç»Ÿé›†æˆ"
      - "å¤§è§„æ¨¡é‡æ„"
      - "æ€§èƒ½ä¼˜åŒ–"
    strategy: "ultrathink_with_examples"
    instruction: "æ·±åº¦æ€è€ƒå¹¶æä¾›å…·ä½“æ¡ˆä¾‹å’Œæœ€ä½³å®è·µå‚è€ƒ"

  security_concerns:
    trigger_conditions:
      - "è®¤è¯æˆæƒè®¾è®¡"
      - "æ•°æ®å®‰å…¨å¤„ç†"
      - "APIå®‰å…¨å®ç°"
    strategy: "adversarial_thinking"
    instruction: "ä»æ”»å‡»è€…è§’åº¦æ€è€ƒï¼Œè¯†åˆ«å®‰å…¨é£é™©ç‚¹"

# ===== è´¨é‡ä¿è¯é…ç½® =====
quality_assurance:
  code_standards:
    coverage_threshold: 90
    complexity_threshold: 10
    duplication_threshold: 5
    security_scan: "mandatory"

  performance_standards:
    api_response_time_p95: "200ms"
    page_load_time: "3s"
    throughput_target: "1000 TPS"
    resource_utilization: "< 80%"

  security_standards:
    vulnerability_tolerance: "zero_high_critical"
    authentication_required: true
    encryption_in_transit: true
    encryption_at_rest: true

  documentation_standards:
    api_documentation: "openapi_3.1"
    architecture_documentation: "c4_model"
    user_documentation: "gitiles_markdown"
    operational_documentation: "runbook_format"

# ===== æ‰§è¡Œé…ç½® =====
execution_config:
  timeout_settings:
    understanding_stage: "30min"
    design_stage: "45min"
    implementation_stage: "120min"
    testing_stage: "60min"
    deployment_stage: "30min"

  retry_policies:
    agent_call_retry: 3
    quality_gate_retry: 2
    sync_point_retry: 1

  parallel_limits:
    max_concurrent_agents: 5
    max_parallel_tasks: 8
    resource_allocation: "high_memory"

  output_management:
    artifact_retention: "30_days"
    log_level: "detailed"
    report_format: "markdown_with_metrics"