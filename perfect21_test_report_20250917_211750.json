{
  "timestamp": "2025-09-17T21:17:50.758533",
  "test_suite": "Perfect21 Complete Test Suite",
  "execution_summary": {
    "total_scripts": 4,
    "successful_scripts": 0,
    "failed_scripts": 4,
    "script_success_rate": 0.0,
    "total_execution_time": 8.297817468643188
  },
  "test_case_summary": {
    "total_tests": 0,
    "successful_tests": 0,
    "failed_tests": 0,
    "error_tests": 0,
    "overall_success_rate": 0
  },
  "detailed_results": [
    {
      "script": "test_agent_selection_core.py",
      "success": false,
      "execution_time": 0.09913516044616699,
      "stdout": "🎯 Perfect21 Agent选择逻辑核心测试\n==================================================\n\n==================================================\n📊 Agent选择测试报告\n==================================================\n总测试: 6\n成功: 4\n失败: 2\n错误: 0\n成功率: 66.7%\n执行时间: 0.02秒\n\n📋 测试覆盖范围:\n  ✅ 验证3-5个agents选择 agent_selection_count_validation\n  ✅ 验证选择相关性 agent_selection_relevance\n  ✅ 验证工作流中agent分布 workflow_agent_distribution\n  ✅ 验证性能和缓存 performance_and_caching\n  ✅ 验证负载均衡 load_balancing\n  ✅ 验证边界情况处理 edge_cases\n\n❌ 测试失败详情:\n  - test_agent_selection_relevance (__main__.TestAgentSelectionCore) (task='设计用户界面组件')\n    错误: False is not true : 期望的技能 'frontend' 没有在选择的agents中体现\n  - test_edge_cases_in_agent_selection (__main__.TestAgentSelectionCore)\n    错误: 9 not less than or equal to 4\n\n📄 详细报告已保存: agent_selection_test_report.json\n",
      "stderr": "test_agent_selection_load_balancing (__main__.TestAgentSelectionCore)\n测试Agent选择的负载均衡 ... ok\ntest_agent_selection_performance_and_caching (__main__.TestAgentSelectionCore)\n测试Agent选择的性能和缓存效果 ... ok\ntest_agent_selection_relevance (__main__.TestAgentSelectionCore)\n测试Agent选择的相关性 ... test_agent_selection_returns_3_to_5_agents (__main__.TestAgentSelectionCore)\n测试验证是否真的选择3-5个agents ... ok\ntest_edge_cases_in_agent_selection (__main__.TestAgentSelectionCore)\n测试Agent选择的边界情况 ... FAIL\ntest_workflow_generation_agent_distribution (__main__.TestAgentSelectionCore)\n测试工作流生成中的agent分布 ... ok\n\n======================================================================\nFAIL: test_agent_selection_relevance (__main__.TestAgentSelectionCore) (task='设计用户界面组件')\n测试Agent选择的相关性\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_agent_selection_core.py\", line 193, in test_agent_selection_relevance\n    self.assertTrue(\nAssertionError: False is not true : 期望的技能 'frontend' 没有在选择的agents中体现\n\n======================================================================\nFAIL: test_edge_cases_in_agent_selection (__main__.TestAgentSelectionCore)\n测试Agent选择的边界情况\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_agent_selection_core.py\", line 330, in test_edge_cases_in_agent_selection\n    self.assertLessEqual(len(selected), available_agents_count)\nAssertionError: 9 not less than or equal to 4\n\n----------------------------------------------------------------------\nRan 6 tests in 0.021s\n\nFAILED (failures=2)\n",
      "return_code": 1,
      "test_name": "Agent选择核心逻辑测试",
      "priority": "high"
    },
    {
      "script": "test_git_hooks_integration_complete.py",
      "success": false,
      "execution_time": 1.0988459587097168,
      "stdout": "[main (root-commit) a1f3a21] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\n🔧 Perfect21 Git Hooks集成测试\n==================================================\n\n📋 运行 TestGitHooksInstallation\n------------------------------\n.[main (root-commit) a1f3a21] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\n.[main (root-commit) a1f3a21] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\n.[main (root-commit) a1f3a21] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\n[main (root-commit) a1f3a21] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\n.[main (root-commit) a1f3a21] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\nF\n======================================================================\nFAIL: test_hook_groups_validation (__main__.TestGitHooksInstallation) (group='essential')\n测试hook组的有效性\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_git_hooks_integration_complete.py\", line 123, in test_hook_groups_validation\n    self.assertIn(hook_name, manager.hooks_config,\nAssertionError: 'pre-commit' not found in {} : 组 essential 中的hook pre-commit 应该在配置中存在\n\n======================================================================\nFAIL: test_hooks_manager_import_and_basic_functionality (__main__.TestGitHooksInstallation)\n测试GitHooksManager的导入和基本功能\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_git_hooks_integration_complete.py\", line 77, in test_hooks_manager_import_and_basic_functionality\n    self.assertGreater(len(manager.hooks_config), 0, \"应该有hooks配置\")\nAssertionError: 0 not greater than 0 : 应该有hooks配置\n\n----------------------------------------------------------------------\nRan 6 tests in 0.394s\n\nFAILED (failures=2)\n[main (root-commit) 05444f6] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\n\n📋 运行 TestCLIGitHooksIntegration\n------------------------------\n.[main (root-commit) 05444f6] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\n.[main (root-commit) 05444f6] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\n.\n----------------------------------------------------------------------\nRan 3 tests in 0.100s\n\nOK\n\n📋 运行 TestWorkflowExecution\n------------------------------\n..\n----------------------------------------------------------------------\nRan 2 tests in 0.403s\n\nOK\n\n📋 运行 TestErrorHandlingAndRecovery\n------------------------------\n...\n----------------------------------------------------------------------\nRan 3 tests in 0.014s\n\nOK\n\n==================================================\n📊 Git Hooks集成测试报告\n==================================================\n总测试数: 14\n成功: 12\n失败: 2\n错误: 0\n整体成功率: 85.7%\n总执行时间: 0.91秒\n\n📋 各测试类结果:\n  ⚠️ TestGitHooksInstallation: 66.7% (6个测试)\n  ✅ TestCLIGitHooksIntegration: 100.0% (3个测试)\n  ✅ TestWorkflowExecution: 100.0% (2个测试)\n  ✅ TestErrorHandlingAndRecovery: 100.0% (3个测试)\n\n🎯 测试覆盖范围:\n  ✅ TestGitHooksInstallation Git仓库设置和基础功能\n  ✅ TestCLIGitHooksIntegration CLI与hooks集成\n  ✅ TestWorkflowExecution 工作流执行逻辑\n  ✅ TestErrorHandlingAndRecovery 错误处理和恢复\n  ✅ 已覆盖 Hook文件创建和执行\n  ✅ 已测试 并行vs顺序执行\n  ✅ 已覆盖 边界条件处理\n",
      "stderr": "2025-09-17 21:17:42 - Perfect21.HooksConfig - WARNING - 配置文件不存在: /tmp/tmpv_8xqgwv/features/git_workflow/hooks_config.yaml\n2025-09-17 21:17:42 - Perfect21.HooksManager - INFO - 初始化Git Hooks插件系统...\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 发现 4 个插件: ['security_scan', 'message_validator', 'test_runner', 'commit_quality']\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: security_scan\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: message_validator\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: test_runner\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: commit_quality\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件加载完成: 4/4 个插件成功加载\n2025-09-17 21:17:42 - Perfect21.HooksManager - INFO - 插件加载完成: 4/4\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 security_scan 已卸载\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 message_validator 已卸载\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 test_runner 已卸载\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 commit_quality 已卸载\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 所有插件及内存已清理\n2025-09-17 21:17:42 - Perfect21.HooksManager - INFO - GitHooksManager清理完成\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 所有插件及内存已清理\n2025-09-17 21:17:42 - Perfect21.HooksConfig - WARNING - 配置文件不存在: /tmp/tmpr5zs8i60/features/git_workflow/hooks_config.yaml\n2025-09-17 21:17:42 - Perfect21.HooksManager - INFO - 初始化Git Hooks插件系统...\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 发现 4 个插件: ['security_scan', 'message_validator', 'test_runner', 'commit_quality']\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: security_scan\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: message_validator\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: test_runner\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: commit_quality\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件加载完成: 4/4 个插件成功加载\n2025-09-17 21:17:42 - Perfect21.HooksManager - INFO - 插件加载完成: 4/4\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 security_scan 已卸载\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 message_validator 已卸载\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 test_runner 已卸载\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 commit_quality 已卸载\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 所有插件及内存已清理\n2025-09-17 21:17:42 - Perfect21.HooksManager - INFO - GitHooksManager清理完成\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 所有插件及内存已清理\n2025-09-17 21:17:42 - Perfect21.HooksConfig - WARNING - 配置文件不存在: /tmp/tmpdat7ltrw/features/git_workflow/hooks_config.yaml\n2025-09-17 21:17:42 - Perfect21.HooksManager - INFO - 初始化Git Hooks插件系统...\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 发现 4 个插件: ['security_scan', 'message_validator', 'test_runner', 'commit_quality']\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: security_scan\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: message_validator\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: test_runner\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 成功加载插件: commit_quality\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件加载完成: 4/4 个插件成功加载\n2025-09-17 21:17:42 - Perfect21.HooksManager - INFO - 插件加载完成: 4/4\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 security_scan 已卸载\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 message_validator 已卸载\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 test_runner 已卸载\n2025-09-17 21:17:42 - Perfect21.PluginManager - INFO - 插件 commit_quality 已卸载\n2025-09-17 21:17:43 - Perfect21.PluginManager - INFO - 所有插件及内存已清理\n2025-09-17 21:17:43 - Perfect21.HooksManager - INFO - GitHooksManager清理完成\n2025-09-17 21:17:43 - Perfect21.PluginManager - INFO - 所有插件及内存已清理\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_git_hooks_integration_complete.py\", line 567, in <module>\n    success = run_git_hooks_integration_tests()\n  File \"/home/xx/dev/Perfect21/test_git_hooks_integration_complete.py\", line 559, in run_git_hooks_integration_tests\n    with open(report_file, 'w', encoding='utf-8') as f:\nFileNotFoundError: [Errno 2] No such file or directory: 'git_hooks_integration_test_results.json'\nError in sys.excepthook:\nTraceback (most recent call last):\n  File \"/usr/lib/python3/dist-packages/apport_python_hook.py\", line 76, in apport_excepthook\n    binary = os.path.realpath(os.path.join(os.getcwd(), sys.argv[0]))\nFileNotFoundError: [Errno 2] No such file or directory\n\nOriginal exception was:\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_git_hooks_integration_complete.py\", line 567, in <module>\n    success = run_git_hooks_integration_tests()\n  File \"/home/xx/dev/Perfect21/test_git_hooks_integration_complete.py\", line 559, in run_git_hooks_integration_tests\n    with open(report_file, 'w', encoding='utf-8') as f:\nFileNotFoundError: [Errno 2] No such file or directory: 'git_hooks_integration_test_results.json'\n",
      "return_code": 1,
      "test_name": "Git Hooks集成测试",
      "priority": "high"
    },
    {
      "script": "test_boundary_conditions_comprehensive.py",
      "success": false,
      "execution_time": 4.535085201263428,
      "stdout": "🔬 Perfect21 边界条件综合测试\n============================================================\n\n📋 运行 TestInputValidation\n----------------------------------------\n..恶意输入被拒绝: AssertionError\n..\n----------------------------------------------------------------------\nRan 4 tests in 0.022s\n\nOK\n\n📋 运行 TestConcurrencyAndLimits\n----------------------------------------\n并发级别 5: 5成功, 0失败, 总时间0.00秒\n并发级别 10: 10成功, 0失败, 总时间0.00秒\n并发级别 20: 20成功, 0失败, 总时间0.01秒\n内存使用测试: 初始23.9MB, 最终24.4MB, 增长0.5MB\n..F\n======================================================================\nFAIL: test_concurrent_workflow_generation (__main__.TestConcurrencyAndLimits) (concurrency=5)\n测试并发工作流生成\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_boundary_conditions_comprehensive.py\", line 260, in test_concurrent_workflow_generation\n    self.assertLess(total_time, avg_execution_time * max_workers * 1.5,\nAssertionError: 0.0018630027770996094 not less than 0.0010936260223388672 : 并发执行效率过低\n\n======================================================================\nFAIL: test_concurrent_workflow_generation (__main__.TestConcurrencyAndLimits) (concurrency=10)\n测试并发工作流生成\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_boundary_conditions_comprehensive.py\", line 260, in test_concurrent_workflow_generation\n    self.assertLess(total_time, avg_execution_time * max_workers * 1.5,\nAssertionError: 0.0020346641540527344 not less than 0.0009505748748779297 : 并发执行效率过低\n\n======================================================================\nFAIL: test_concurrent_workflow_generation (__main__.TestConcurrencyAndLimits) (concurrency=20)\n测试并发工作流生成\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_boundary_conditions_comprehensive.py\", line 260, in test_concurrent_workflow_generation\n    self.assertLess(total_time, avg_execution_time * max_workers * 1.5,\nAssertionError: 0.005963325500488281 not less than 0.002143263816833496 : 并发执行效率过低\n\n======================================================================\nFAIL: test_timeout_handling (__main__.TestConcurrencyAndLimits)\n测试超时处理\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_boundary_conditions_comprehensive.py\", line 324, in test_timeout_handling\n    self.assertLess(execution_time, 2.0, \"超时处理应该及时生效\")\nAssertionError: 3.0048985481262207 not less than 2.0 : 超时处理应该及时生效\n\n----------------------------------------------------------------------\nRan 4 tests in 3.460s\n\nFAILED (failures=4)\n\n📋 运行 TestErrorRecoveryMechanisms\n----------------------------------------\n....\n----------------------------------------------------------------------\nRan 4 tests in 0.903s\n\nOK\n\n============================================================\n📊 边界条件测试报告\n============================================================\n总测试数: 12\n成功: 8\n失败: 4\n错误: 0\n整体成功率: 66.7%\n总执行时间: 4.38秒\n\n📋 各测试类结果:\n  ✅ TestInputValidation: 100.0% (4个测试)\n  ❌ TestConcurrencyAndLimits: 0.0% (4个测试)\n  ✅ TestErrorRecoveryMechanisms: 100.0% (4个测试)\n\n🎯 边界条件测试覆盖:\n  ✅ TestInputValidation 空输入和异常输入处理\n  ✅ TestInputValidation 特殊字符和编码处理\n  ✅ TestInputValidation 注入攻击防护\n  ✅ TestConcurrencyAndLimits 并发执行限制\n  ✅ TestConcurrencyAndLimits 内存使用控制\n  ✅ TestConcurrencyAndLimits 超时处理机制\n  ✅ TestErrorRecoveryMechanisms 网络错误恢复\n  ✅ TestErrorRecoveryMechanisms 文件系统错误处理\n  ✅ TestErrorRecoveryMechanisms 优雅降级机制\n  ✅ TestErrorRecoveryMechanisms 断路器模式\n\n📄 详细报告已保存: boundary_conditions_test_report.json\n",
      "stderr": "Failed to generate workflow: 'NoneType' object has no attribute 'encode'\n",
      "return_code": 1,
      "test_name": "边界条件综合测试",
      "priority": "high"
    },
    {
      "script": "test_perfect21_comprehensive_system.py",
      "success": false,
      "execution_time": 2.5645124912261963,
      "stdout": "🚀 Perfect21 综合测试套件启动\n============================================================\n📋 开始执行 26 个测试用例...\n------------------------------------------------------------\ntest_agent_capability_creation (__main__.TestDynamicWorkflowGenerator)\n测试Agent能力对象创建 ... ok\ntest_agent_selection_logic (__main__.TestDynamicWorkflowGenerator)\n测试Agent选择逻辑 - 验证是否选择3-5个agents ... FAIL\ntest_agent_selector_performance (__main__.TestDynamicWorkflowGenerator)\n测试Agent选择器性能 ... ok\ntest_complexity_analysis (__main__.TestDynamicWorkflowGenerator)\n测试复杂度分析算法 ... FAIL\ntest_regex_pattern_matching (__main__.TestDynamicWorkflowGenerator)\n测试预编译正则表达式匹配 ... FAIL\ntest_task_requirement_parsing (__main__.TestDynamicWorkflowGenerator)\n测试任务需求解析 ... FAIL\ntest_workflow_generation_success_patterns (__main__.TestDynamicWorkflowGenerator)\n测试成功模式匹配是否工作 ... ok\ntest_workflow_template_selection (__main__.TestDynamicWorkflowGenerator)\n测试工作流模板选择 ... ok\ntest_cli_config_access (__main__.TestCLIIntegration)\n测试CLI配置访问 ... ok\ntest_cli_hooks_command (__main__.TestCLIIntegration)\n测试CLI hooks命令 ... ok\ntest_cli_parallel_command (__main__.TestCLIIntegration)\n测试CLI并行命令 ... ok\ntest_cli_status_command (__main__.TestCLIIntegration)\n测试CLI状态命令 ... ok\ntest_git_hooks_manager_import (__main__.TestGitHooksIntegration)\n测试Git hooks管理器导入 ... [main (root-commit) 1993d6b] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\nok\ntest_hook_execution_simulation (__main__.TestGitHooksIntegration)\n模拟测试hook执行 ... [main (root-commit) 1993d6b] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\nok\ntest_hooks_installation_simulation (__main__.TestGitHooksIntegration)\n模拟测试hooks安装 ... [main (root-commit) 1993d6b] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\nok\ntest_parallel_execution_logic (__main__.TestWorkflowExecution)\n测试并行执行逻辑 ... ok\ntest_workflow_structure_validation (__main__.TestWorkflowExecution)\n测试工作流结构验证 ... ok\ntest_concurrent_execution_limits (__main__.TestBoundaryConditions)\n测试并发执行限制 ... ok\ntest_empty_input_handling (__main__.TestBoundaryConditions)\n测试空输入处理 ... ok\ntest_error_recovery_mechanisms (__main__.TestBoundaryConditions)\n测试错误恢复机制 ... ok\ntest_extremely_long_input (__main__.TestBoundaryConditions)\n测试极长输入 ... ok\ntest_memory_usage_limits (__main__.TestBoundaryConditions)\n测试内存使用限制 ... ok\ntest_special_characters_input (__main__.TestBoundaryConditions)\n测试特殊字符输入 ... ok\ntest_timeout_handling (__main__.TestBoundaryConditions)\n测试超时处理 ... FAIL\ntest_agent_selection_performance (__main__.TestPerformanceMetrics)\n测试Agent选择性能 ... ok\ntest_workflow_generation_performance (__main__.TestPerformanceMetrics)\n测试工作流生成性能 ... ok\n\n======================================================================\nFAIL: test_agent_selection_logic (__main__.TestDynamicWorkflowGenerator)\n测试Agent选择逻辑 - 验证是否选择3-5个agents\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_perfect21_comprehensive_system.py\", line 108, in test_agent_selection_logic\n    self.assertGreater(len(selected_agents), 0, \"至少应该选择一个agent\")\nAssertionError: 0 not greater than 0 : 至少应该选择一个agent\n\n======================================================================\nFAIL: test_complexity_analysis (__main__.TestDynamicWorkflowGenerator)\n测试复杂度分析算法\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_perfect21_comprehensive_system.py\", line 90, in test_complexity_analysis\n    self.assertLessEqual(complexity, max_expected,\nAssertionError: 5.0 not less than or equal to 4.0 : 复杂度过高: 简单的bug修复 -> 5.0\n\n======================================================================\nFAIL: test_regex_pattern_matching (__main__.TestDynamicWorkflowGenerator)\n测试预编译正则表达式匹配\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_perfect21_comprehensive_system.py\", line 219, in test_regex_pattern_matching\n    self.assertTrue(\nAssertionError: False is not true : 期望在'这是high priority的urgent任务'中找到'high'\n\n======================================================================\nFAIL: test_task_requirement_parsing (__main__.TestDynamicWorkflowGenerator)\n测试任务需求解析\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_perfect21_comprehensive_system.py\", line 75, in test_task_requirement_parsing\n    self.assertGreater(task_req.complexity, 5.0)  # 应该识别为高复杂度\nAssertionError: 5.0 not greater than 5.0\n\n======================================================================\nFAIL: test_timeout_handling (__main__.TestBoundaryConditions)\n测试超时处理\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/usr/lib/python3.10/asyncio/tasks.py\", line 456, in wait_for\n    return fut.result()\nasyncio.exceptions.CancelledError\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_perfect21_comprehensive_system.py\", line 573, in test_timeout_handling\n    asyncio.run(run_with_timeout())\n  File \"/usr/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/xx/dev/Perfect21/test_perfect21_comprehensive_system.py\", line 568, in run_with_timeout\n    return await asyncio.wait_for(\n  File \"/usr/lib/python3.10/asyncio/tasks.py\", line 458, in wait_for\n    raise exceptions.TimeoutError() from exc\nasyncio.exceptions.TimeoutError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/xx/dev/Perfect21/test_perfect21_comprehensive_system.py\", line 578, in test_timeout_handling\n    self.assertLess(execution_time, 1.5, \"超时处理应该及时生效\")\nAssertionError: 2.003544807434082 not less than 1.5 : 超时处理应该及时生效\n\n----------------------------------------------------------------------\nRan 26 tests in 2.410s\n\nFAILED (failures=5)\n\n============================================================\n📊 Perfect21 测试报告\n============================================================\n总测试数: 26\n成功: 21\n失败: 5\n错误: 0\n跳过: 0\n成功率: 80.8%\n执行时间: 2.41秒\n\n❌ 失败的测试:\n  - test_agent_selection_logic (__main__.TestDynamicWorkflowGenerator): 0 not greater than 0 : 至少应该选择一个agent\n  - test_complexity_analysis (__main__.TestDynamicWorkflowGenerator): 5.0 not less than or equal to 4.0 : 复杂度过高: 简单的bug修复 -> 5.0\n  - test_regex_pattern_matching (__main__.TestDynamicWorkflowGenerator): False is not true : 期望在'这是high priority的urgent任务'中找到'high'\n  - test_task_requirement_parsing (__main__.TestDynamicWorkflowGenerator): 5.0 not greater than 5.0\n  - test_timeout_handling (__main__.TestBoundaryConditions): 2.003544807434082 not less than 1.5 : 超时处理应该及时生效\n\n📄 详细报告已保存到: perfect21_comprehensive_test_report.json\n",
      "stderr": "2025-09-17 21:17:48 - Perfect21.HooksConfig - WARNING - 配置文件不存在: /tmp/tmpkmze2i33/features/git_workflow/hooks_config.yaml\n2025-09-17 21:17:48 - Perfect21.HooksManager - INFO - 初始化Git Hooks插件系统...\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 发现 4 个插件: ['security_scan', 'message_validator', 'test_runner', 'commit_quality']\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 成功加载插件: security_scan\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 成功加载插件: message_validator\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 成功加载插件: test_runner\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 成功加载插件: commit_quality\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 插件加载完成: 4/4 个插件成功加载\n2025-09-17 21:17:48 - Perfect21.HooksManager - INFO - 插件加载完成: 4/4\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 插件 security_scan 已卸载\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 插件 message_validator 已卸载\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 插件 test_runner 已卸载\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 插件 commit_quality 已卸载\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 所有插件及内存已清理\n2025-09-17 21:17:48 - Perfect21.HooksManager - INFO - GitHooksManager清理完成\n2025-09-17 21:17:48 - Perfect21.PluginManager - INFO - 所有插件及内存已清理\n",
      "return_code": 1,
      "test_name": "Perfect21系统综合测试",
      "priority": "medium"
    }
  ],
  "coverage_summary": {
    "core_functionality": {
      "agent_selection_logic": "✅ 验证3-5个agents选择逻辑",
      "workflow_generation": "✅ 测试工作流生成模式匹配",
      "complexity_analysis": "✅ 测试任务复杂度分析"
    },
    "integration_testing": {
      "git_hooks_installation": "✅ 测试hooks安装和执行",
      "cli_commands": "✅ 测试CLI命令正常工作",
      "workflow_execution": "✅ 测试工作流执行器"
    },
    "boundary_conditions": {
      "empty_invalid_inputs": "✅ 测试空输入和异常输入",
      "concurrent_execution": "✅ 测试并发执行限制",
      "error_recovery": "✅ 测试错误恢复机制",
      "memory_management": "✅ 测试内存使用控制"
    }
  },
  "recommendations": {
    "quality_assessment": "needs_improvement",
    "priority_areas": [
      "Agent选择逻辑优化",
      "Git Hooks集成修复",
      "边界条件处理增强"
    ]
  }
}