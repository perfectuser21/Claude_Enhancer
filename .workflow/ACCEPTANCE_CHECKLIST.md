# Acceptance Checklist - 代码质量检查CLI工具

> 项目：Code Quality Checker CLI Tool
> 创建时间：2025-10-19
> Phase: Phase 2 Discovery

---

## 🎯 项目目标

实现一个命令行工具，用于检查Python和Shell脚本的代码质量，帮助开发者发现潜在问题。

---

## ✅ 核心功能验收标准

### 1. 代码复杂度检查
- [ ] 能够读取并解析Python文件（.py）
- [ ] 能够读取并解析Shell脚本文件（.sh）
- [ ] 检测函数行数（阈值：>50行警告，>150行错误）
- [ ] 检测嵌套深度（阈值：>3层警告，>5层错误）
- [ ] 检测函数圈复杂度（if/for/while分支数）
- [ ] 正确识别函数边界（def/function关键字）

### 2. 命名规范检查
- [ ] 检查Python命名规范（函数：snake_case，类：PascalCase）
- [ ] 检查Shell命名规范（函数：snake_case，变量：UPPER_CASE或snake_case）
- [ ] 检测不符合规范的命名并报告位置
- [ ] 支持配置文件定义自定义命名规则

### 3. 报告生成功能
- [ ] 生成JSON格式报告（结构化数据）
  - 包含：文件路径、问题类型、严重级别、行号、描述
- [ ] 生成Markdown格式报告（可读性强）
  - 包含：问题总结、详细列表、建议修复
- [ ] 支持同时生成多种格式
- [ ] 报告包含统计信息（总问题数、警告数、错误数）

### 4. 配置文件支持
- [ ] 支持读取rules.yml配置文件
- [ ] 可配置项：复杂度阈值（行数、嵌套深度）
- [ ] 可配置项：命名规范规则（正则表达式）
- [ ] 可配置项：检查规则开关（启用/禁用特定检查）
- [ ] 提供默认配置（无配置文件时使用）
- [ ] 配置文件格式验证（YAML语法检查）

---

## 🧪 测试验收标准

### 5. 单元测试
- [ ] 测试覆盖率 ≥ 80%
- [ ] 核心函数测试：复杂度计算函数
- [ ] 核心函数测试：命名规范检查函数
- [ ] 核心函数测试：报告生成函数
- [ ] 边界条件测试：空文件、超大文件
- [ ] 错误处理测试：文件不存在、权限不足

### 6. 集成测试
- [ ] 端到端测试：完整的检查流程
- [ ] 示例文件测试：提供的sample文件能正确检查
- [ ] 配置文件测试：自定义配置能生效
- [ ] 输出格式测试：JSON和Markdown格式正确

### 7. 性能测试
- [ ] 单文件检查时间 < 1秒（文件<1000行）
- [ ] 批量检查时间合理（10个文件<5秒）
- [ ] 内存占用 < 100MB（检查大型文件时）

---

## 📚 文档验收标准

### 8. 使用文档
- [ ] README.md包含完整使用说明
  - 安装步骤
  - 基本用法示例
  - 命令行参数说明
  - 配置文件示例
- [ ] 提供examples/目录包含示例
  - sample_code.py（示例Python文件）
  - sample_script.sh（示例Shell脚本）
  - sample_report.md（示例报告）
  - rules.yml（示例配置）

### 9. 代码文档
- [ ] 主函数包含docstring说明
- [ ] 核心函数包含参数和返回值说明
- [ ] 复杂逻辑包含行内注释
- [ ] 配置文件格式有注释说明

---

## 🛠️ 技术实现验收标准

### 10. 代码质量
- [ ] 通过静态检查（bash -n for shell, python -m py_compile for python）
- [ ] 无语法错误
- [ ] 函数复杂度合理（自己的工具检查自己 😄）
- [ ] 变量命名清晰

### 11. 可用性
- [ ] 命令行工具可独立运行
- [ ] 支持--help显示帮助信息
- [ ] 支持--version显示版本号
- [ ] 错误信息清晰易懂
- [ ] 支持--verbose详细输出模式

### 12. 可扩展性
- [ ] 代码结构清晰，易于添加新检查规则
- [ ] 配置文件设计支持未来扩展
- [ ] 报告格式支持添加新字段

---

## 🎖️ 完成标准

**项目完成的定义**：
- ✅ 上述所有12个类别的验收项全部通过
- ✅ 工具能够成功检查Claude Enhancer项目中的Python/Shell文件
- ✅ 生成的报告准确且有用
- ✅ 所有测试通过
- ✅ 文档完整可用

---

## 📊 验收方式

**Phase 7最终验收时**：
1. 逐项对照此清单验证
2. 运行工具检查实际文件
3. 检查测试覆盖率报告
4. 审查生成的报告质量
5. 确认文档完整性

**验收负责人**：Claude Code（AI执行者）
**最终确认人**：User（项目所有者）

---

*此清单在Phase 2创建，作为整个项目的验收标准*
*任何对功能的修改都应同步更新此清单*
