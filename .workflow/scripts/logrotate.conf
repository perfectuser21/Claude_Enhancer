# logrotate.conf - 日志轮转配置
# Purpose: 修复CE-ISSUE-009 - 添加日志轮转策略
# Version: 1.0.0
# Created: 2025-10-09

.workflow/logs/*.log {
    # 文件大小超过10MB时轮转
    size 10M

    # 保留5个历史文件
    rotate 5

    # 压缩旧日志
    compress
    delaycompress

    # 文件缺失不报错
    missingok
    notifempty

    # 创建新文件权限
    create 0644 root root

    # 轮转后脚本（可选）
    # postrotate
    #     # 重启服务或发送信号
    # endscript
}

.workflow/executor.log {
    size 5M
    rotate 3
    compress
    missingok
    notifempty
}
