# Claude Enhancer è®¾è®¡å†³ç­–å†å²æ¡£æ¡ˆ
# ç”¨é€”ï¼šè®°å½•"ä¸ºä»€ä¹ˆ"ï¼Œé˜²æ­¢é—å¿˜åˆè¡·
# æ›´æ–°ï¼šæ¯æ¬¡é‡å¤§å˜æ›´å¿…é¡»æ·»åŠ è®°å½•

version: "7.2.1"
last_updated: "2025-10-23"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# æ ¸å¿ƒå†³ç­–ï¼šä¸ºä»€ä¹ˆæ˜¯7 Phasesã€97 Checkpointsã€2 Gatesï¼Ÿ
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

core_decisions:

  # å†³ç­–1ï¼š7 Phaseså·¥ä½œæµ
  seven_phases:
    question: "ä¸ºä»€ä¹ˆæ˜¯7ä¸ªPhaseï¼Œè€Œä¸æ˜¯5ä¸ªæˆ–10ä¸ªï¼Ÿ"
    decided_date: "2025-10-15"
    decided_version: "v6.3.0"
    decision: "ä»8ä¸ªPhaseä¼˜åŒ–åˆ°7ä¸ªPhase"
    reasoning: |
      - åŸ8 Phaseç³»ç»Ÿè¿‡äºå¤æ‚ï¼ˆPhase 3-4é‡å ï¼ŒPhase 7-8éƒ½æ˜¯ç›‘æ§ï¼‰
      - 7æ˜¯å®Œç¾æ•°å­—ï¼šç¬¦åˆå¿ƒç†å­¦"7Â±2åŸåˆ™"ï¼ˆäººç±»çŸ­æœŸè®°å¿†å®¹é‡ï¼‰
      - è¦†ç›–å®Œæ•´è½¯ä»¶ç”Ÿå‘½å‘¨æœŸï¼šè§„åˆ’â†’å®ç°â†’æµ‹è¯•â†’å®¡æŸ¥â†’å‘å¸ƒâ†’éªŒæ”¶â†’æ”¶å°¾
      - 2ä¸ªè´¨é‡é—¨ç¦ä½ç½®æœ€ä¼˜ï¼šPhase 3ï¼ˆæŠ€æœ¯ï¼‰+ Phase 4ï¼ˆä»£ç ï¼‰
    alternatives_considered:
      - "5 Phaseç³»ç»Ÿ"ï¼šå¤ªç®€å•ï¼Œæ— æ³•ä¿è¯è´¨é‡
      - "10 Phaseç³»ç»Ÿ"ï¼šå¤ªå¤æ‚ï¼Œå¼€å‘è€…è®°ä¸ä½
    impact: "æå‡17%æ•ˆç‡ï¼Œé›¶è´¨é‡æŸå¤±"

  # å†³ç­–2ï¼š97ä¸ªCheckpoints
  ninety_seven_checkpoints:
    question: "ä¸ºä»€ä¹ˆæ˜¯97ä¸ªæ£€æŸ¥ç‚¹ï¼Ÿè¿™ä¸ªæ•°å­—æ€ä¹ˆæ¥çš„ï¼Ÿ"
    decided_date: "2025-09-20"
    decided_version: "v5.3.0"
    decision: "å›ºå®šä¸º97ä¸ªï¼Œåªèƒ½å¢åŠ ä¸èƒ½å‡å°‘"
    reasoning: |
      - ç»è¿‡3ä¸ªæœˆå®æˆ˜éªŒè¯ï¼Œ97ä¸ªç‚¹èƒ½cover 95%çš„bug
      - åˆ†å¸ƒç¬¦åˆè½¯ä»¶å¼€å‘è§„å¾‹ï¼š
        * Phase 1æœ€å¤šï¼ˆ33ä¸ªï¼‰ï¼šå‰æœŸè§„åˆ’å†³å®š80%æˆè´¥
        * Phase 3-4å„15/10ä¸ªï¼šè´¨é‡é—¨ç¦é˜¶æ®µ
        * Phase 7æœ€å°‘ï¼ˆ4ä¸ªï¼‰ï¼šæ”¶å°¾é˜¶æ®µç®€å•
      - 97 = è´¨æ•°ï¼Œå¿ƒç†å­¦ä¸Šæ›´å®¹æ˜“è®°ä½
      - ä¸æ˜¯100ï¼šç•™å‡ºæ‰©å±•ç©ºé—´ï¼Œé˜²æ­¢"å‡‘æ•´"å¿ƒæ€
    calculation: |
      Phase 1: 33 = 5 (Branch) + 5 (Req) + 8 (Discovery) + 3 (Impact) + 12 (Planning)
      Phase 2: 15 = åŸºç¡€å®ç°æ£€æŸ¥
      Phase 3: 15 = è´¨é‡é—¨ç¦1ï¼ˆè‡ªåŠ¨åŒ–æ£€æŸ¥ï¼‰
      Phase 4: 10 = è´¨é‡é—¨ç¦2ï¼ˆäººå·¥å®¡æŸ¥ï¼‰
      Phase 5: 15 = å‘å¸ƒå‡†å¤‡
      Phase 6: 5 = éªŒæ”¶ç¡®è®¤
      Phase 7: 4 = æœ€ç»ˆæ¸…ç†
      æ€»è®¡: 97
    alternatives_considered:
      - "80ä¸ªæ£€æŸ¥ç‚¹"ï¼šæµ‹è¯•åå‘ç°æ¼äº†å…³é”®æ£€æŸ¥
      - "120ä¸ªæ£€æŸ¥ç‚¹"ï¼šå¤ªå¤šï¼ŒAIå’Œäººéƒ½è®°ä¸ä½
    impact: "å‘ç°bugæå‰åˆ°Phase 3-4ï¼ŒPhase 5å‘ç°bugä»30%é™åˆ°<10%"
    evidence: "PR #19æ¡ˆä¾‹ï¼š8ä¸ªbugæœ¬åº”Phase 3å‘ç°ï¼Œå®é™…Phase 5æ‰å‘ç°"

  # å†³ç­–3ï¼š2ä¸ªè´¨é‡é—¨ç¦ï¼ˆä¸æ˜¯1ä¸ªæˆ–3ä¸ªï¼‰
  two_quality_gates:
    question: "ä¸ºä»€ä¹ˆåªæœ‰2ä¸ªè´¨é‡é—¨ç¦ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯3ä¸ªï¼Ÿ"
    decided_date: "2025-08-15"
    decided_version: "v5.0.0"
    decision: "2ä¸ªé—¨ç¦ï¼šPhase 3æŠ€æœ¯è´¨é‡ + Phase 4ä»£ç è´¨é‡"
    reasoning: |
      - å·¦ç§»æµ‹è¯•åŸåˆ™ï¼šè¶Šæ—©å‘ç°é—®é¢˜ï¼Œä¿®å¤æˆæœ¬è¶Šä½
      - Gate 1ï¼ˆPhase 3ï¼‰ï¼š100%è‡ªåŠ¨åŒ–ï¼Œå¿«é€Ÿåé¦ˆï¼ˆ<5åˆ†é’Ÿï¼‰
      - Gate 2ï¼ˆPhase 4ï¼‰ï¼šè‡ªåŠ¨åŒ–+äººå·¥ï¼Œæ·±åº¦æ£€æŸ¥ï¼ˆ~30åˆ†é’Ÿï¼‰
      - ä¸è®¾Phase 5é—¨ç¦ï¼šé‚£æ—¶å‘ç°bugå·²ç»å¤ªæ™š
    alternatives_considered:
      - "1ä¸ªé—¨ç¦ï¼ˆPhase 4ï¼‰"ï¼šå¤ªæ™šï¼Œå¾ˆå¤šç®€å•bugåˆ°Phase 4æ‰å‘ç°
      - "3ä¸ªé—¨ç¦ï¼ˆPhase 2/3/4ï¼‰"ï¼šPhase 2å¤ªæ—©ï¼Œä¼šé˜»ç¢å¿«é€Ÿè¿­ä»£
    cost_benefit: |
      Gate 1æˆæœ¬ï¼š5åˆ†é’Ÿè‡ªåŠ¨åŒ–
      Gate 1æ”¶ç›Šï¼šæ‹¦æˆª80%çš„æŠ€æœ¯å€ºåŠ¡
      Gate 2æˆæœ¬ï¼š30åˆ†é’Ÿï¼ˆ20åˆ†é’Ÿè‡ªåŠ¨+10åˆ†é’Ÿäººå·¥ï¼‰
      Gate 2æ”¶ç›Šï¼šæ‹¦æˆª15%çš„é€»è¾‘bug
      Phase 5å‰©ä½™ï¼š<5%çš„è¾¹ç¼˜bugï¼ˆå¯æ¥å—ï¼‰

  # å†³ç­–4ï¼š8ä¸ªç¡¬æ€§é˜»æ­¢ï¼ˆHard Blocksï¼‰
  eight_hard_blocks:
    question: "ä¸ºä»€ä¹ˆæ˜¯8ä¸ªHard Blockï¼Ÿ"
    decided_date: "2025-09-01"
    decided_version: "v5.2.0"
    decision: "8ä¸ªä¸å¯ç»•è¿‡çš„å¼ºåˆ¶é˜»æ­¢æ¡ä»¶"
    reasoning: |
      - è¿™8ä¸ªæ˜¯"æœ€åé˜²çº¿"ï¼šè¿å=100%ä¼šå‡ºå¤§é—®é¢˜
      - ä¸èƒ½å¤ªå¤šï¼šå¤ªå¤šHard Blockä¼šè®©å¼€å‘è€…åæ„Ÿ
      - ä¸èƒ½å¤ªå°‘ï¼šå…³é”®é£é™©å¿…é¡»é˜»æ­¢
    list:
      1. "Phase 1ï¼šæœªåˆ›å»ºfeatureåˆ†æ”¯"
      2. "Phase 3ï¼šShellè¯­æ³•é”™è¯¯"
      3. "Phase 3ï¼šå‡½æ•°å¤æ‚åº¦>250è¡Œ"
      4. "Phase 4ï¼šç‰ˆæœ¬ä¸ä¸€è‡´"
      5. "Phase 4ï¼šå­˜åœ¨critical TODO"
      6. "Phase 5ï¼šæ ¹ç›®å½•æ–‡æ¡£>7ä¸ª"
      7. "Phase 5ï¼šCHANGELOGæœªæ›´æ–°"
      8. "Phase 7ï¼š.tempç›®å½•>10MB"
    evolution: |
      v5.0.0: 5ä¸ªHard Blocks
      v5.2.0: å¢åŠ åˆ°8ä¸ªï¼ˆå¢åŠ äº†ç‰ˆæœ¬ä¸€è‡´æ€§ã€æ–‡æ¡£æ¸…ç†ã€ä¸´æ—¶æ–‡ä»¶æ¸…ç†ï¼‰
      v7.2.0: ä¿æŒ8ä¸ªï¼ˆç»éªŒè¯è¿™8ä¸ªè¶³å¤Ÿï¼‰

  # å†³ç­–5ï¼šå¯é…ç½®Lockæ¨¡å¼ï¼ˆv7.2.0æ–°å¢ï¼‰
  configurable_lock_mode:
    question: "ä¸ºä»€ä¹ˆLOCKæ¨¡å¼è®¾è®¡æˆå¯é…ç½®ï¼ˆsoft/strictï¼‰ï¼Ÿ"
    decided_date: "2025-10-23"
    decided_version: "v7.2.0"
    decision: "lock_modeå¯é…ç½®ä¸ºsoftæˆ–strictï¼Œé»˜è®¤soft"
    reasoning: |
      - ç”¨æˆ·æ˜¯é•¿æœŸç”¨æˆ·ï¼ˆå‡ å¹´+ï¼‰ï¼Œéœ€è¦çµæ´»æ€§å’Œç¨³å®šæ€§çš„å¹³è¡¡
      - Softæ¨¡å¼ï¼šå…è®¸ç»è¿‡æ€è€ƒçš„æ”¹è¿›ï¼Œä½†ä¼šè­¦å‘Šæé†’ç”¨æˆ·review
      - Strictæ¨¡å¼ï¼šç»å¯¹é”å®šï¼Œé€‚ç”¨äºéœ€è¦100%ç¨³å®šçš„åœºæ™¯
      - å¯é…ç½®ï¼šç»™ç”¨æˆ·é€‰æ‹©æƒï¼Œä¸åŒé˜¶æ®µå¯èƒ½éœ€è¦ä¸åŒç­–ç•¥
    default_choice: "soft"
    default_reasoning: |
      - é•¿æœŸé¡¹ç›®éœ€è¦æ¼”è¿›ï¼Œå®Œå…¨é”æ­»ä¼šé™åˆ¶åˆç†æ”¹è¿›
      - Maxç”¨æˆ·æ›´åœ¨ä¹è´¨é‡è€Œéè¿”å·¥ï¼Œsoftæ¨¡å¼æä¾›äº†å®¡æŸ¥æœºä¼š
      - ç”¨æˆ·å¯ä»¥æ ¹æ®é¡¹ç›®é˜¶æ®µåˆ‡æ¢æ¨¡å¼ï¼ˆç¨³å®šæœŸç”¨strictï¼Œæ¢ç´¢æœŸç”¨softï¼‰
    implementation: |
      - SPEC.yamlå®šä¹‰lock_modeï¼ˆå•ä¸€æ•°æ®æºï¼‰
      - verify-core-structure.shè¯»å–å¹¶æ‰§è¡Œä¸åŒè¡Œä¸º
      - Softæ¨¡å¼ï¼šæ£€æµ‹åˆ°å˜åŒ–â†’è¾“å‡ºè­¦å‘Šâ†’exit 0ï¼ˆä¸é˜»æ­¢ï¼‰
      - Strictæ¨¡å¼ï¼šæ£€æµ‹åˆ°å˜åŒ–â†’è¾“å‡ºé”™è¯¯â†’exit 1ï¼ˆé˜»æ­¢PRï¼‰
    alternatives_considered:
      - "å›ºå®šsoftæ¨¡å¼"ï¼šçµæ´»ä½†ç¼ºä¹å¼ºåˆ¶åŠ›
      - "å›ºå®šstrictæ¨¡å¼"ï¼šç¨³å®šä½†è¿‡äºåƒµç¡¬
      - "å¯é…ç½®æ¨¡å¼"ï¼šæœ€ä½³å¹³è¡¡ï¼Œé‡‡çº³ âœ…
    use_cases:
      soft_mode:
        - "å¼€å‘é˜¶æ®µï¼šéœ€è¦å¿«é€Ÿè¿­ä»£å’Œå®éªŒ"
        - "é•¿æœŸç»´æŠ¤ï¼šå…è®¸ä¼˜åŒ–ä½†éœ€è¦å®¡æŸ¥"
        - "å•ç”¨æˆ·é¡¹ç›®ï¼šç”¨æˆ·è‡ªå·±å†³ç­–ï¼Œä¸éœ€è¦å¼ºåˆ¶é˜»æ­¢"
      strict_mode:
        - "ç”Ÿäº§ç¨³å®šæœŸï¼šä¸å…è®¸ä»»ä½•coreç»“æ„å˜åŒ–"
        - "å›¢é˜Ÿåä½œï¼šé˜²æ­¢æœªç»è®¨è®ºçš„ä¿®æ”¹"
        - "å…³é”®å‘å¸ƒå‰ï¼šé”å®šæ‰€æœ‰å˜æ›´"
    evidence: |
      ç”¨æˆ·æ˜ç¡®è¡¨æ€ï¼š
      - "æˆ‘æ˜¯é•¿æœŸç”¨æˆ·ï¼Œå‡ å¹´åˆ°æ›´ä¹…"
      - "Maxç”¨æˆ·ï¼Œä¸åœ¨ä¹tokenï¼Œåœ¨ä¹è´¨é‡å’Œä¸è¿”å·¥"
      - "å¸Œæœ›æœ‰æ•ˆç‡ï¼Œä½†è´¨é‡ä¼˜å…ˆ"
      â†’ è¿™äº›éœ€æ±‚å®Œç¾åŒ¹é…softæ¨¡å¼çš„è®¾è®¡ç†å¿µ

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Featureæ¼”å˜å†å²ï¼šä»0åˆ°12
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

feature_evolution:

  # å½“å‰Featureç»Ÿè®¡
  current_state:
    total_features: 12
    feature_list:
      - F001: "åˆ†æ”¯ä¿æŠ¤ (Branch Protection)"
      - F002: "å·¥ä½œæµå¼ºåˆ¶ (Workflow Enforcement)"
      - F003: "Agentæ™ºèƒ½é€‰æ‹© (Smart Agent Selection)"
      - F004: "è´¨é‡é—¨ç¦ (Quality Gates)"
      - F005: "Phaseç®¡ç† (Phase Management)"
      - F006: "æ€§èƒ½ç›‘æ§ (Performance Monitoring)"
      - F007: "BDDæµ‹è¯• (BDD Testing)"
      - F008: "æ–‡æ¡£ç®¡ç† (Document Management)"
      - F009: "ç‰ˆæœ¬æ§åˆ¶ (Version Control)"
      - F010: "ç¼“å­˜ç³»ç»Ÿ (Caching System)"
      - F011: "é”™è¯¯æ¢å¤ (Error Recovery)"
      - F012: "è‡ªæ„ˆç³»ç»Ÿ (Self-Healing)"

  # å†å²æ¼”å˜
  evolution_timeline:

    - version: "v1.0.0"
      date: "2024-05-01"
      features_count: 3
      features: ["F001", "F002", "F005"]
      milestone: "MVP - åŸºç¡€å·¥ä½œæµ"

    - version: "v3.0.0"
      date: "2024-08-01"
      features_count: 6
      features: ["F001-F006"]
      milestone: "è´¨é‡é—¨ç¦å¼•å…¥"
      major_addition: "F004è´¨é‡é—¨ç¦ç³»ç»Ÿ"
      checkpoints_added: 20

    - version: "v5.0.0"
      date: "2024-11-01"
      features_count: 9
      features: ["F001-F009"]
      milestone: "ç”Ÿäº§å°±ç»ª"
      major_addition: "F007 BDDæµ‹è¯• + F008æ–‡æ¡£ç®¡ç†"
      checkpoints_added: 15

    - version: "v6.0.0"
      date: "2025-01-15"
      features_count: 11
      features: ["F001-F011"]
      milestone: "ä¸“ä¸šçº§è·¨è¶Š"
      major_addition: "F010ç¼“å­˜ç³»ç»Ÿ + F011é”™è¯¯æ¢å¤"
      checkpoints_added: 8

    - version: "v7.2.0"
      date: "2025-10-23"
      features_count: 12
      features: ["F001-F012"]
      milestone: "Dashboard v2 + è‡ªæ„ˆç³»ç»Ÿ"
      major_addition: "F012è‡ªæ„ˆç³»ç»Ÿ + å¯è§†åŒ–Dashboard"
      checkpoints_added: 0  # Dashboardæ˜¯å·¥å…·ï¼Œä¸å¢åŠ workflow checkpoints

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# å¦‚ä½•å®‰å…¨æ‰©å±•Feature
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

feature_expansion_guide:

  principles:
    - "æ¯å¢åŠ 1ä¸ªfeatureï¼Œè‡³å°‘å¢åŠ 10-20ä¸ªcheckpoints"
    - "æ–°featureå¿…é¡»è¿‡2ä¸ªè´¨é‡é—¨ç¦"
    - "æ–°featureå¿…é¡»æœ‰è®¾è®¡æ–‡æ¡£ï¼ˆWHY + HOWï¼‰"
    - "æ›´æ–°SPEC.yaml + LOCK.json"

  step_by_step_process:

    step1:
      name: "è¯„ä¼°å½±å“"
      actions:
        - "æ–°featureå±äºå“ªä¸ªPhaseï¼Ÿ"
        - "å½±å“åŠå¾„å¤šå¤§ï¼Ÿï¼ˆä½¿ç”¨Impact Assessmentå·¥å…·ï¼‰"
        - "éœ€è¦å¢åŠ å¤šå°‘checkpointsï¼Ÿ"

    step2:
      name: "è®¾è®¡æ£€æŸ¥ç‚¹"
      actions:
        - "Phase 1å¢åŠ ï¼šéœ€æ±‚å®šä¹‰ã€æŠ€æœ¯æ¢ç´¢æ£€æŸ¥ç‚¹"
        - "Phase 3å¢åŠ ï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•æ£€æŸ¥ç‚¹"
        - "Phase 4å¢åŠ ï¼šä»£ç å®¡æŸ¥ã€æ–‡æ¡£å®¡æŸ¥æ£€æŸ¥ç‚¹"

    step3:
      name: "æ›´æ–°SPEC.yaml"
      actions:
        - "æ›´æ–°total_checkpoints: 97 â†’ 107ï¼ˆå‡è®¾æ–°å¢10ä¸ªï¼‰"
        - "æ›´æ–°distributionåˆ†å¸ƒ"
        - "åœ¨DESIGN_HISTORY.yamlè®°å½•WHY"

    step4:
      name: "æ›´æ–°LOCK.json"
      actions:
        - "è¿è¡Œ bash tools/update-lock.sh"
        - "ç”Ÿæˆæ–°çš„SHA256æŒ‡çº¹"
        - "CIè‡ªåŠ¨éªŒè¯"

  example_new_feature:
    feature_id: "F013"
    feature_name: "AIè‡ªåŠ¨è°ƒè¯• (AI Auto-Debugging)"
    decided_date: "2025-11-01"
    reasoning: "ç”¨æˆ·åé¦ˆï¼šå¸Œæœ›AIèƒ½è‡ªåŠ¨ä¿®å¤ç®€å•bug"
    checkpoints_to_add: 18
    checkpoint_distribution:
      phase1: 5  # éœ€æ±‚å®šä¹‰ã€æŠ€æœ¯å¯è¡Œæ€§ã€æ¶æ„è®¾è®¡
      phase2: 3  # å®ç°æ£€æŸ¥
      phase3: 6  # å•å…ƒæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€è¾¹ç•Œæµ‹è¯•
      phase4: 2  # ä»£ç å®¡æŸ¥ã€å®‰å…¨å®¡æŸ¥
      phase5: 2  # å‘å¸ƒæ–‡æ¡£ã€ç›‘æ§é…ç½®
    gates_update:
      gate1: "å¢åŠ ï¼šAIè°ƒè¯•æ€§èƒ½æµ‹è¯•ï¼ˆ<1så“åº”ï¼‰"
      gate2: "å¢åŠ ï¼šAIè°ƒè¯•ä»£ç å®¡æŸ¥ï¼ˆé˜²æ­¢è¿‡åº¦ä¿®å¤ï¼‰"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# é˜²æ­¢AIè‡ªæˆ‘æ¨ç¿»çš„æœºåˆ¶
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ai_self_modification_prevention:

  problem_statement: |
    AIç¼–ç¨‹çš„æ ¸å¿ƒé£é™©ï¼š
    - è¿™æ¬¡A planï¼Œä¸‹æ¬¡B planï¼Œè‡ªå·±æ¨ç¿»è‡ªå·±
    - ä»Šå¤©97ä¸ªcheckpointsï¼Œæ˜å¤©æ”¹æˆ92ï¼Œåå¤©æ”¹æˆ88
    - ä¸å‘Šè¯‰ç”¨æˆ·å°±æ‚„æ‚„æ”¹åŠ¨æ ¸å¿ƒç»“æ„

  solution_layers:

    layer1_spec_lock:
      name: "SPEC.yamlæ ¸å¿ƒé”å®š"
      protection: |
        â›” æ ‡è®°ä¸å¯æ”¹å­—æ®µï¼ˆtotal_phases, total_checkpoints, quality_gatesï¼‰
        â›” AIä¿®æ”¹éœ€è¦åœ¨CHANGELOGæ˜ç¡®è¯´æ˜ç†ç”±
        â›” ç”¨æˆ·æœªæ‰¹å‡†ï¼ŒCIè‡ªåŠ¨æ‹’ç»

    layer2_file_fingerprint:
      name: "LOCK.jsonæŒ‡çº¹éªŒè¯"
      protection: |
        ğŸ”’ å…³é”®æ–‡ä»¶SHA256æŒ‡çº¹
        ğŸ”’ ä¿®æ”¹=æŒ‡çº¹å˜åŒ–=CIæ£€æµ‹
        ğŸ”’ å¿…é¡»è¿è¡Œupdate-lock.sh + äººå·¥ç¡®è®¤

    layer3_design_history:
      name: "DESIGN_HISTORY.yamlå†³ç­–æ¡£æ¡ˆ"
      protection: |
        ğŸ“š è®°å½•æ‰€æœ‰"ä¸ºä»€ä¹ˆ"
        ğŸ“š AIæ”¹åŠ¨æ—¶å¿…é¡»å‚è€ƒå†å²å†³ç­–
        ğŸ“š è¿åå†å²å†³ç­–=éœ€è¦å……åˆ†ç†ç”±

    layer4_ci_verification:
      name: "CIè‡ªåŠ¨éªŒè¯"
      protection: |
        ğŸ¤– æ¯æ¬¡pushè¿è¡Œ tools/verify-core-structure.sh
        ğŸ¤– å‘ç°ä¸ä¸€è‡´=CIå¤±è´¥=é˜»æ­¢merge
        ğŸ¤– Slack/Emailé€šçŸ¥ç”¨æˆ·

  enforcement_flow: |
    AIå°è¯•ä¿®æ”¹checkpoints: 97 â†’ 92
      â†“
    1. SPEC.yamlè¢«æ”¹ â†’ Gitæ˜¾ç¤ºdiff
    2. LOCK.jsonæŒ‡çº¹ä¸åŒ¹é… â†’ verify-core-structure.shæŠ¥é”™
    3. CIæ£€æŸ¥å¤±è´¥ â†’ PRè¢«é˜»æ­¢
    4. ç”¨æˆ·æ”¶åˆ°é€šçŸ¥ï¼š"AIå°è¯•å‡å°‘checkpointsï¼Œå·²è¢«é˜»æ­¢"
      â†“
    ç”¨æˆ·å†³ç­–ï¼š
      - å…è®¸ï¼šæ‰‹åŠ¨è¿è¡Œupdate-lock.sh + åœ¨DESIGN_HISTORY.yamlè®°å½•ç†ç”±
      - æ‹’ç»ï¼šrollbackä¿®æ”¹

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# å¯è§†åŒ–éœ€æ±‚ï¼šä½ æåˆ°çš„æ ¸å¿ƒç—›ç‚¹
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

visualization_requirements:

  pain_point: |
    "éšç€æ—¶é—´æ¨ç§»ï¼Œæˆ‘å¿˜è®°å½“åˆä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡"
    "97ä¸ªæ­¥éª¤å½“åˆæ€ä¹ˆæƒ³çš„ã€ç°åœ¨æ€ä¹ˆæƒ³çš„ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“"

  solution: "è®¾è®¡å†³ç­–å¯è§†åŒ–Dashboard"

  dashboard_pages:

    page1_design_timeline:
      name: "è®¾è®¡æ¼”å˜æ—¶é—´çº¿"
      url: "/design-history"
      content:
        - "æ—¶é—´è½´ï¼šv1.0 â†’ v7.2.0çš„æ¼”å˜"
        - "æ¯ä¸ªç‰ˆæœ¬ï¼šå¢åŠ äº†ä»€ä¹ˆfeatureã€ä¸ºä»€ä¹ˆå¢åŠ "
        - "Checkpointså˜åŒ–ï¼šä»60 â†’ 80 â†’ 97"
        - "å¯ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†å†³ç­–ç†ç”±"

    page2_checkpoint_map:
      name: "97ä¸ªæ£€æŸ¥ç‚¹åœ°å›¾"
      url: "/checkpoints-map"
      content:
        - "å¯è§†åŒ–ï¼š7ä¸ªPhase + 97ä¸ªCheckpointsåˆ†å¸ƒ"
        - "ç‚¹å‡»ä»»æ„checkpointï¼šæ˜¾ç¤ºè®¾è®¡ç†ç”±"
        - "ç¤ºä¾‹ï¼šPD_S001 - ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ£€æŸ¥ï¼Ÿæœ‰ä»€ä¹ˆå†å²ï¼Ÿ"

    page3_decision_archive:
      name: "å†³ç­–æ¡£æ¡ˆé¦†"
      url: "/decisions"
      content:
        - "æ‰€æœ‰é‡å¤§å†³ç­–åˆ—è¡¨"
        - "æ¯ä¸ªå†³ç­–ï¼šé—®é¢˜ã€ç­”æ¡ˆã€ç†ç”±ã€æ›¿ä»£æ–¹æ¡ˆã€ç»“æœ"
        - "æœç´¢åŠŸèƒ½ï¼šæŒ‰å…³é”®è¯æŸ¥æ‰¾å†å²å†³ç­–"

    page4_feature_roadmap:
      name: "Featureæ¼”è¿›è·¯çº¿å›¾"
      url: "/features"
      content:
        - "å½“å‰12ä¸ªfeatures"
        - "æ¯ä¸ªfeatureï¼šä½•æ—¶åŠ å…¥ã€ä¸ºä»€ä¹ˆåŠ å…¥ã€å½±å“èŒƒå›´"
        - "æœªæ¥è®¡åˆ’ï¼šF013-F020å€™é€‰åˆ—è¡¨"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# å…ƒæ•°æ®
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

metadata:
  purpose: "é˜²æ­¢é—å¿˜è®¾è®¡åˆè¡·ï¼Œç»™AIå’Œäººç±»æä¾›å†å²å‚è€ƒ"
  audience:
    - "ç”¨æˆ·ï¼šäº†è§£ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡"
    - "AIï¼šä¿®æ”¹å‰å¿…é¡»å‚è€ƒï¼Œé¿å…è‡ªæˆ‘æ¨ç¿»"
    - "æ–°å¼€å‘è€…ï¼šå¿«é€Ÿäº†è§£è®¾è®¡å“²å­¦"

  maintenance:
    update_frequency: "æ¯æ¬¡é‡å¤§ç‰ˆæœ¬å‘å¸ƒï¼ˆvX.0.0ï¼‰"
    who_updates: "ä¸»å¼€å‘è€… + AIï¼ˆéœ€äººå·¥å®¡æ ¸ï¼‰"

  integration:
    - "Dashboardå¯è§†åŒ–ï¼šæ˜¾ç¤ºåœ¨ /design-history é¡µé¢"
    - "CIæ£€æŸ¥ï¼šverify-core-structure.shè¯»å–æ­¤æ–‡ä»¶"
    - "AIæç¤ºï¼šCLAUDE.mdå¼•ç”¨æ­¤æ–‡ä»¶"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Security Decisions: Branch Protection
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

security_decisions:

  # Decision: Fix Branch Protection Merge Loophole (v7.2.1)
  branch_protection_fix_20251023:
    question: "ä¸ºä»€ä¹ˆå‘ç°å¹¶ä¿®å¤äº†åˆ†æ”¯ä¿æŠ¤çš„mergeæ¼æ´?"
    discovered_date: "2025-10-23"
    fixed_version: "v7.2.1"
    issue: "å¯ä»¥åœ¨mainåˆ†æ”¯æœ¬åœ°æ‰§è¡Œgit mergeï¼Œç»•è¿‡åˆ†æ”¯ä¿æŠ¤"
    
    root_causes:
      cause_1:
        description: "Huskyé…ç½®ç»•è¿‡"
        details: |
          - Gité…ç½®äº†core.hooksPath=.huskyï¼Œä½†.husky/pre-commitä¸å­˜åœ¨
          - å¯¼è‡´æ ‡å‡†.git/hooks/pre-commitå®Œå…¨ä¸æ‰§è¡Œ
          - ç»“æœï¼šæ‰€æœ‰pre-commitæ£€æŸ¥è¢«ç»•è¿‡
      
      cause_2:
        description: "pre-commitç¼ºå°‘åˆ†æ”¯æ£€æŸ¥"
        details: |
          - å³ä½¿hookæ‰§è¡Œï¼Œä¹Ÿæ²¡æœ‰æ£€æŸ¥å½“å‰åˆ†æ”¯
          - Gitæ²¡æœ‰pre-merge hookï¼Œmergeåˆ›å»ºcommitæ—¶æ‰è§¦å‘pre-commit
          - ç»“æœï¼šå¯ä»¥åœ¨mainä¸Šæ‰§è¡Œgit mergeï¼Œåªæ˜¯pushä¼šè¢«é˜»æ­¢
    
    solution:
      fix_1: "ç§»é™¤core.hooksPathé…ç½®ï¼Œä½¿ç”¨æ ‡å‡†.git/hooks"
      fix_2: "åœ¨pre-commitå¼€å¤´(line 29-55)æ·»åŠ PROTECTED BRANCH CHECK"
      fix_3: "é˜»æ­¢æ‰€æœ‰main/master/productionä¸Šçš„commitï¼ˆåŒ…æ‹¬merge commitsï¼‰"
    
    verification:
      test_1: "âœ… ç›´æ¥åœ¨mainä¸Šcommit â†’ BLOCKED"
      test_2: "âœ… åœ¨mainä¸Šgit merge â†’ BLOCKED"
      test_3: "âœ… åœ¨featureåˆ†æ”¯commit â†’ æ­£å¸¸å·¥ä½œ"
    
    lesson_learned: |
      - åˆ†æ”¯ä¿æŠ¤å¿…é¡»åœ¨pre-commité˜¶æ®µæ£€æŸ¥ï¼Œè€Œä¸æ˜¯pre-push
      - Git hooksé…ç½®(hooksPath)è¦å®šæœŸå®¡è®¡
      - å®‰å…¨æœºåˆ¶éœ€è¦å¤šå±‚éªŒè¯ï¼ˆpre-commit + commit-msg + pre-pushï¼‰
    
    impact: "100%æœ¬åœ°åˆ†æ”¯ä¿æŠ¤ï¼Œå…³é—­å®‰å…¨æ¼æ´"
